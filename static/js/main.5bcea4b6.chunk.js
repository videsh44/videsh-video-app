(this["webpackJsonptwilio-video-app-react"]=this["webpackJsonptwilio-video-app-react"]||[]).push([[0],{162:function(e){e.exports=JSON.parse('{"a":"0.2.1"}')},188:function(e,t,n){e.exports=n(310)},310:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),o=n.n(i),c=n(365),l=n(364),u=n(7),s=n(372),d=n(160),m=n(371),f=n(347),v=n(3),p=n(4),b=Object(a.createContext)(null);function h(){var e=Object(a.useContext)(b),t=Object(p.a)(e,2);return[t[0],t[1]]}function g(e){var t=e.room,n=e.children,i=Object(a.useState)(null),o=Object(p.a)(i,2),c=o[0],l=o[1];return Object(a.useEffect)((function(){var e=function(){return l(null)},n=function(e){return l((function(t){return t===e?null:t}))};return t.on("disconnected",e),t.on("participantDisconnected",n),function(){t.off("disconnected",e),t.off("participantDisconnected",n)}}),[t]),r.a.createElement(b.Provider,{value:[c,function(e){return l((function(t){return t===e?null:e}))}]},n)}var E=n(159),O=n.n(E),w="undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/Mobile/.test(navigator.userAgent);function C(){var e=I(),t=e.room.localParticipant,n=e.localTracks,r=e.getLocalVideoTrack,i=e.removeLocalVideoTrack,o=e.onError,c=n.find((function(e){return e.name.includes("camera")})),l=Object(a.useState)(!1),u=Object(p.a)(l,2),s=u[0],d=u[1],m=Object(a.useRef)(),f=Object(a.useCallback)((function(){if(!s)if(c){m.current=c.mediaStreamTrack.getSettings().deviceId;var e=null===t||void 0===t?void 0:t.unpublishTrack(c);null===t||void 0===t||t.emit("trackUnpublished",e),i()}else d(!0),r({deviceId:{exact:m.current}}).then((function(e){return null===t||void 0===t?void 0:t.publishTrack(e,{priority:"low"})})).catch(o).finally((function(){return d(!1)}))}),[c,t,r,s,o,i]);return[!!c,f]}function S(){var e=I().room,t=C(),n=Object(p.a)(t,2),r=n[0],i=n[1],o=Object(a.useRef)(!1);return Object(a.useEffect)((function(){if(w){var e=function(){"hidden"===document.visibilityState&&r?(o.current=!0,i()):o.current&&(o.current=!1,i())};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}}}),[r,e,i]),null}var j=n(14),k={width:1280,height:720,frameRate:24},x=n(21),y=n.n(x);function T(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=function(){return navigator.mediaDevices.enumerateDevices().then((function(e){return r(e)}))};return navigator.mediaDevices.addEventListener("devicechange",e),e(),function(){navigator.mediaDevices.removeEventListener("devicechange",e)}}),[]),n}function P(){return T().filter((function(e){return"audioinput"===e.kind}))}function _(){return T().filter((function(e){return"videoinput"===e.kind}))}function N(){return T().filter((function(e){return"audiooutput"===e.kind}))}function L(){return _().length>0}var A=n(18),D=n.n(A);window.TwilioVideo=y.a;var R=Object(a.createContext)(null);function B(e){var t=e.options,n=e.children,i=e.onError,o=void 0===i?function(){}:i,c=e.onDisconnect,l=void 0===c?function(){}:c,u=function(e){console.log("ERROR: ".concat(e.message),e),o(e)},s=function(){var e=Object(a.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(!1),s=Object(p.a)(u,2),d=s[0],m=s[1],f=P(),v=_(),b=f.length>0,h=v.length>0,g=Object(a.useCallback)((function(e){var t={};return e&&(t.deviceId={exact:e}),y.a.createLocalAudioTrack(t).then((function(e){return r(e),e}))}),[]),E=Object(a.useCallback)((function(e){var t=Object(j.a)(Object(j.a)({},k),{},{name:"camera-".concat(Date.now())},e);return y.a.createLocalVideoTrack(t).then((function(e){return l(e),e}))}),[]),O=Object(a.useCallback)((function(){c&&(c.stop(),l(void 0))}),[c]),w=Object(a.useCallback)((function(){if(!b&&!h)return Promise.resolve();if(d||n||c)return Promise.resolve();m(!0);var e=window.localStorage.getItem("TwilioVideoApp-selectedAudioInput"),t=window.localStorage.getItem("TwilioVideoApp-selectedVideoInput"),a=f.some((function(t){return e&&t.deviceId===e})),i=v.some((function(e){return t&&e.deviceId===t})),o={video:h&&Object(j.a)(Object(j.a)({},k),{},{name:"camera-".concat(Date.now())},i&&{deviceId:{exact:t}}),audio:a?{deviceId:{exact:e}}:b};return y.a.createLocalTracks(o).then((function(e){var t=e.find((function(e){return"video"===e.kind})),n=e.find((function(e){return"audio"===e.kind}));t&&l(t),n&&r(n)})).finally((function(){return m(!1)}))}),[b,h,n,c,f,v,d]);return{localTracks:[n,c].filter((function(e){return void 0!==e})),getLocalVideoTrack:E,getLocalAudioTrack:g,isAcquiringLocalTracks:d,removeLocalVideoTrack:O,getAudioAndVideoTracks:w}}(),d=s.localTracks,m=s.getLocalVideoTrack,f=s.getLocalAudioTrack,v=s.isAcquiringLocalTracks,b=s.removeLocalVideoTrack,h=s.getAudioAndVideoTracks,E=function(e,t,n){var r=Object(a.useState)(new D.a),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(a.useState)(!1),u=Object(p.a)(l,2),s=u[0],d=u[1],m=Object(a.useRef)(n);return Object(a.useEffect)((function(){m.current=n}),[n]),{room:o,isConnecting:s,connect:Object(a.useCallback)((function(n){return d(!0),y.a.connect(n,Object(j.a)(Object(j.a)({},m.current),{},{tracks:e})).then((function(e){c(e);var t=function(){return e.disconnect()};e.setMaxListeners(15),e.once("disconnected",(function(){setTimeout((function(){return c(new D.a)})),window.removeEventListener("beforeunload",t),w&&window.removeEventListener("pagehide",t)})),window.twilioRoom=e,e.localParticipant.videoTracks.forEach((function(e){return e.setPriority("low")})),d(!1),window.addEventListener("beforeunload",t),w&&window.addEventListener("pagehide",t)}),(function(e){t(e),d(!1)}))}),[e,t])}}(d,u,t),O=E.room,C=E.isConnecting,x=E.connect;!function(e,t){Object(a.useEffect)((function(){var n=function(e,n){n&&t(n)};return e.on("disconnected",n),function(){e.off("disconnected",n)}}),[e,t])}(O,o),function(e,t){var n=e.localParticipant;Object(a.useEffect)((function(){if(n)return n.on("trackPublicationFailed",t),function(){n.off("trackPublicationFailed",t)}}),[n,t])}(O,o),function(e,t){Object(a.useEffect)((function(){return e.on("disconnected",t),function(){e.off("disconnected",t)}}),[e,t])}(O,l);var T=function(e,t){var n=Object(a.useState)(!1),r=Object(p.a)(n,2),i=r[0],o=r[1],c=Object(a.useRef)(null),l=Object(a.useCallback)((function(){navigator.mediaDevices.getDisplayMedia({audio:!1,video:{frameRate:10,height:1080,width:1920}}).then((function(n){var a=n.getTracks()[0];e.localParticipant.publishTrack(a,{name:"screen",priority:"low"}).then((function(t){c.current=function(){e.localParticipant.unpublishTrack(a),e.localParticipant.emit("trackUnpublished",t),a.stop(),o(!1)},a.onended=c.current,o(!0)})).catch(t)})).catch((function(e){"AbortError"!==e.name&&"NotAllowedError"!==e.name&&t(e)}))}),[e,t]),u=Object(a.useCallback)((function(){i?c.current():l()}),[i,l,c]);return[i,u]}(O,o),N=Object(p.a)(T,2),L=N[0],A=N[1];return r.a.createElement(R.Provider,{value:{room:O,localTracks:d,isConnecting:C,onError:u,onDisconnect:l,getLocalVideoTrack:m,getLocalAudioTrack:f,connect:x,isAcquiringLocalTracks:v,removeLocalVideoTrack:b,isSharingScreen:L,toggleScreenShare:A,getAudioAndVideoTracks:h}},r.a.createElement(g,{room:O},n),r.a.createElement(S,null))}function I(){var e=Object(a.useContext)(R);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}var M=Object(d.a)((function(e){return Object(m.a)({button:{background:e.brand,color:"white","&:hover":{background:"#600101"}}})}));function z(e){var t=M(),n=I().room;return r.a.createElement(f.a,{onClick:function(){return n.disconnect()},className:Object(v.a)(t.button,e.className),"data-cy-disconnect":!0},"Disconnect")}function H(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("g",{fill:"#707578"},r.a.createElement("path",{d:"M12 3.5c4.694 0 8.5 3.806 8.5 8.5s-3.806 8.5-8.5 8.5-8.5-3.806-8.5-8.5S7.306 3.5 12 3.5zm0 1c-4.142 0-7.5 3.358-7.5 7.5 0 4.142 3.358 7.5 7.5 7.5 4.142 0 7.5-3.358 7.5-7.5 0-4.142-3.358-7.5-7.5-7.5zm1.367 3.429C14.959 8.492 16.1 10.215 16.1 12c0 1.16-.481 2.294-1.256 3.1h.356c.245 0 .45.177.492.41l.008.09c0 .245-.177.45-.41.492l-.09.008h-2.008l-.048-.003-.034-.005c-.088-.017-.167-.055-.233-.11l-.06-.06c-.037-.044-.067-.096-.087-.151l-.001-.004-.012-.04c-.004-.012-.007-.024-.009-.037v-.005c-.005-.024-.006-.042-.007-.06L12.7 13.6c0-.276.224-.5.5-.5.245 0 .45.177.492.41l.008.09v1.176c.833-.6 1.4-1.676 1.4-2.776 0-1.373-.886-2.71-2.067-3.129-.26-.092-.396-.377-.304-.638.092-.26.378-.396.638-.304zm-2.559-.03c.03.001.058.004.086.01l.062.016.018.006c.04.015.075.034.108.056.086.059.152.143.188.242l.001.004.008.025c.006.017.01.034.013.052l.008.09v2c0 .276-.224.5-.5.5-.245 0-.45-.177-.492-.41l-.008-.09V9.224c-.833.6-1.4 1.676-1.4 2.776 0 1.373.886 2.71 2.067 3.129.26.092.396.377.304.638-.092.26-.378.396-.638.304C9.041 15.508 7.9 13.785 7.9 12c0-1.16.481-2.294 1.255-3.1H8.8c-.245 0-.45-.177-.492-.41L8.3 8.4c0-.245.177-.45.41-.492L8.8 7.9h2.008z",transform:"translate(-233 -689) translate(-1 673) translate(37 16) translate(197.298)"}))))}function W(e){var t=Object(a.useState)(null===e||void 0===e?void 0:e.mediaStreamTrack),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(null===e||void 0===e?void 0:e.mediaStreamTrack),e){var t=function(){return i(e.mediaStreamTrack)};return e.on("started",t),function(){e.off("started",t)}}}),[e]),r}function V(){var e=I().localTracks,t=Object(a.useState)(null),n=Object(p.a)(t,2),i=n[0],o=n[1],c=e.find((function(e){return e.name.includes("camera")})),l=W(c),u=_();Object(a.useEffect)((function(){(null===l||void 0===l?void 0:l.getSettings().facingMode)&&null===i&&o(!0)}),[l,i]);var s=Object(a.useCallback)((function(){var e="user"===(null===l||void 0===l?void 0:l.getSettings().facingMode)?"environment":"user";c.restart(Object(j.a)(Object(j.a)({},k),{},{facingMode:e}))}),[l,c]);return i&&u.length>1?r.a.createElement(f.a,{onClick:s,disabled:!c,startIcon:r.a.createElement(H,null)},"Flip Camera"):null}var F=n(369),U=n(354),K=n(352),G=n(353),Y=n(350),q=n(351),Z=n(162),J=n(34),Q=n.n(J),X=n(48),$={trackSwitchOffMode:void 0,dominantSpeakerPriority:"standard",bandwidthProfileMode:"collaboration",maxTracks:w?"5":"10",maxAudioBitrate:"16000",renderDimensionLow:"low",renderDimensionStandard:"960p",renderDimensionHigh:"wide1080p"},ee=function(){var e={};for(var t in $)e[t]=t;return e}();function te(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(u.a)({},t.name,"default"===t.value?void 0:t.value))}var ne=n(65),ae=(n(306),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_DATABASE_URL,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID});var re=n(43);function ie(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return fetch("/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_identity:e,room_name:t,passcode:n,create_room:a})})}function oe(e){return ie("temp-name","temp-room",e,!1).then(function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,401!==t.status){e.next=5;break}return e.abrupt("return",{isValid:!1,error:null===(a=n.error)||void 0===a?void 0:a.message});case 5:if(!t.ok||!n.token){e.next=7;break}return e.abrupt("return",{isValid:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function ce(e){switch(e){case"passcode incorrect":return"Passcode is incorrect";case"passcode expired":return"Passcode has expired";default:return e}}function le(){var e=Object(re.g)(),t=Object(a.useState)(null),n=Object(p.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!1),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(a.useState)(),d=Object(p.a)(s,2),m=d[0],f=d[1],v=Object(a.useCallback)((function(e,t){return ie(e,t,r.passcode).then(function(){var e=Object(X.a)(Q.a.mark((function e(t){var n,a,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.json();case 4:throw a=e.sent,r=ce((null===(n=a.error)||void 0===n?void 0:n.message)||t.statusText),Error(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).then((function(e){return f(e.room_type),e.token}))}),[r]);Object(a.useEffect)((function(){var t=function(){var e=window.location.search.match(/passcode=(.*)&?/);return e?e[1]:window.sessionStorage.getItem("passcode")}();t?oe(t).then((function(n){(null===n||void 0===n?void 0:n.isValid)&&(i({passcode:t}),window.sessionStorage.setItem("passcode",t),e.replace(window.location.pathname))})).then((function(){return u(!0)})):u(!0)}),[e]);var b=Object(a.useCallback)((function(e){return oe(e).then((function(t){if(!(null===t||void 0===t?void 0:t.isValid))throw new Error(ce(null===t||void 0===t?void 0:t.error));i({passcode:e}),window.sessionStorage.setItem("passcode",e)}))}),[]),h=Object(a.useCallback)((function(){return i(null),window.sessionStorage.removeItem("passcode"),Promise.resolve()}),[]);return{user:r,isAuthReady:l,getToken:v,signIn:b,signOut:h,roomType:m}}var ue=Object(a.createContext)(null);function se(e){var t=Object(a.useState)(null),n=Object(p.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],d=function(){var e=N(),t=Object(a.useState)("default"),n=Object(p.a)(t,2),r=n[0],i=n[1],o=Object(a.useCallback)((function(e){window.localStorage.setItem("TwilioVideoApp-selectedAudioOutput",e),i(e)}),[i]);return Object(a.useEffect)((function(){var t=window.localStorage.getItem("TwilioVideoApp-selectedAudioOutput");e.some((function(e){return t&&e.deviceId===t}))&&i(t)}),[e]),[r,o]}(),m=Object(p.a)(d,2),f=m[0],v=m[1],b=Object(a.useReducer)(te,$),h=Object(p.a)(b,2),g=h[0],E=h[1],O={error:i,setError:o,isFetching:u,activeSinkId:f,setActiveSinkId:v,settings:g,dispatchSetting:E};O="firebase"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?Object(j.a)(Object(j.a)({},O),function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(a.useCallback)(function(){var e=Object(X.a)(Q.a.mark((function e(t,a){var r,i,o,c;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new window.Headers,e.next=3,n.getIdToken();case 3:return i=e.sent,r.set("Authorization",i),o=Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TOKEN_ENDPOINT||"/token",c=new window.URLSearchParams({identity:t,roomName:a}),e.abrupt("return",fetch("".concat(o,"?").concat(c),{headers:r}).then((function(e){return e.text()})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]);Object(a.useEffect)((function(){ne.initializeApp(ae),ne.auth().onAuthStateChanged((function(e){r(e),l(!0)}))}),[]);var s=Object(a.useCallback)((function(){var e=new ne.auth.GoogleAuthProvider;return e.addScope("https://www.googleapis.com/auth/plus.login"),ne.auth().signInWithPopup(e).then((function(e){r(e.user)}))}),[]),d=Object(a.useCallback)((function(){return ne.auth().signOut().then((function(){r(null)}))}),[]);return{user:n,signIn:s,signOut:d,isAuthReady:c,getToken:u}}()):"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?Object(j.a)(Object(j.a)({},O),le()):Object(j.a)(Object(j.a)({},O),{},{getToken:function(){var e=Object(X.a)(Q.a.mark((function e(t,n){var a,r,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new window.Headers,r=Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_TOKEN_ENDPOINT||"/token",i=new window.URLSearchParams({identity:t,roomName:n}),e.abrupt("return",fetch("".concat(r,"?").concat(i),{headers:a}).then((function(e){return e.text()})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});return r.a.createElement(ue.Provider,{value:Object(j.a)(Object(j.a)({},O),{},{getToken:function(e,t){return s(!0),O.getToken(e,t).then((function(e){return s(!1),e})).catch((function(e){return o(e),s(!1),Promise.reject(e)}))}})},e.children)}function de(){var e=Object(a.useContext)(ue);if(!e)throw new Error("useAppState must be used within the AppStateProvider");return e}var me=function(e){var t=e.open,n=e.onClose,a=de().roomType;return r.a.createElement(F.a,{open:t,onClose:n,fullWidth:!0,maxWidth:"xs"},r.a.createElement(Y.a,null,"About"),r.a.createElement(q.a,null),r.a.createElement(K.a,null,r.a.createElement(G.a,null,"Browser supported: ",String(y.a.isSupported)),r.a.createElement(G.a,null,"SDK Version: ",y.a.version),r.a.createElement(G.a,null,"App Version: ",Z.a),r.a.createElement(G.a,null,"Deployed Tag: ",Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GIT_TAG||"N/A"),r.a.createElement(G.a,null,"Deployed Commit Hash: ",Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GIT_COMMIT||"N/A"),a&&r.a.createElement(G.a,null,"Room Type: ",a)),r.a.createElement(q.a,null),r.a.createElement(U.a,null,r.a.createElement(f.a,{onClick:n,color:"primary",variant:"contained",autoFocus:!0},"OK")))},fe=n(379);function ve(e){var t=Object(a.useState)(!!e&&e.isEnabled),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(!!e&&e.isEnabled),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("enabled",t),e.on("disabled",n),function(){e.off("enabled",t),e.off("disabled",n)}}}),[e]),r}var pe,be=0,he=window.AudioContext||window.webkitAudioContext;function ge(e){var t=(pe=pe||new he).createMediaStreamSource(e),n=pe.createAnalyser();return n.smoothingTimeConstant=.2,n.fftSize=256,t.connect(n),n}var Ee=r.a.memo((function(e){var t=e.audioTrack,n=e.color,i=void 0===n?"white":n,o=Object(a.useRef)(null),c=Object(a.useState)(),l=Object(p.a)(c,2),u=l[0],s=l[1],d=ve(t),m=W(t);Object(a.useEffect)((function(){if(t&&m&&d){var e=new MediaStream([m.clone()]),n=function(){return e.getTracks().forEach((function(e){return e.stop()}))};t.on("stopped",n);var a=function(){n(),e=new MediaStream([m.clone()]),s(ge(e))};return s(ge(e)),window.addEventListener("focus",a),function(){n(),window.removeEventListener("focus",a),t.off("stopped",n)}}}),[d,m,t]),Object(a.useEffect)((function(){var e=o.current;if(d&&e&&u){var t=new Uint8Array(u.frequencyBinCount),n=Object(fe.a)((function(){u.getByteFrequencyData(t);for(var n=0,a=t.length,r=0;r<a;r++)n+=t[r];var i=Math.min(14,Math.max(0,7*Math.log10(n/a/3)));null===e||void 0===e||e.setAttribute("y",String(14-i))}),100);return function(){e.setAttribute("y","14"),n.stop()}}}),[d,u]);var f="audio-level-clip-".concat(be++);return d?r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-test-audio-indicator":!0},r.a.createElement("defs",null,r.a.createElement("clipPath",{id:f},r.a.createElement("rect",{ref:o,x:"0",y:"14",width:"24",height:"24"}))),r.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(.5)"},r.a.createElement("rect",{clipPath:"url(#".concat(f,")"),width:"5.2",height:"10",x:"9.5",y:"3.5",rx:"6",ry:"3",fill:"#23BF6E"}),r.a.createElement("path",{fill:i,strokeWidth:"0",d:"M17.389 10.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V17.09C8.395 16.836 6 14.281 6 11.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM11.944 4c1.566 0 2.834 1.268 2.834 2.833v4.334c0 1.564-1.268 2.833-2.834 2.833-1.564 0-2.833-1.27-2.833-2.833V6.833C9.111 5.268 10.38 4 11.944 4zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334c0 1.012.822 1.833 1.833 1.833 1.013 0 1.834-.82 1.834-1.833V6.833c0-1.013-.82-1.833-1.834-1.833z"}))):r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",transform:"translate(-0.5, 0)","data-test-audio-mute-icon":!0},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:i,strokeWidth:"0",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),r.a.createElement("path",{fill:"red",strokeWidth:"0",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))})),Oe=n(100),we=n(355),Ce=n(356),Se=n(367),je=n(374);function ke(){var e=P(),t=I().localTracks.find((function(e){return"audio"===e.kind})),n=W(t),a=null===n||void 0===n?void 0:n.getSettings().deviceId;return r.a.createElement("div",null,r.a.createElement(Oe.a,{variant:"subtitle2",gutterBottom:!0},"Audio Input"),r.a.createElement(we.a,{container:!0,alignItems:"center",justify:"space-between"},r.a.createElement("div",{className:"inputSelect"},e.length>1?r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(Se.a,{onChange:function(e){return n=e.target.value,window.localStorage.setItem("TwilioVideoApp-selectedAudioInput",n),void(null===t||void 0===t||t.restart({deviceId:{exact:n}}));var n},value:a||"",variant:"outlined"},e.map((function(e){return r.a.createElement(je.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(Oe.a,null,(null===t||void 0===t?void 0:t.mediaStreamTrack.label)||"No Local Audio")),r.a.createElement(Ee,{audioTrack:t,color:"black"})))}function xe(){var e,t=N(),n=de(),a=n.activeSinkId,i=n.setActiveSinkId,o=null===(e=t.find((function(e){return e.deviceId===a})))||void 0===e?void 0:e.label;return r.a.createElement("div",{className:"inputSelect"},t.length>1?r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(Oe.a,{variant:"subtitle2",gutterBottom:!0},"Audio Output"),r.a.createElement(Se.a,{onChange:function(e){return i(e.target.value)},value:a,variant:"outlined"},t.map((function(e){return r.a.createElement(je.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"subtitle2"},"Audio Output"),r.a.createElement(Oe.a,null,o||"System Default Audio Output")))}var ye=Object(s.a)("video")({width:"100%",height:"100%"});function Te(e){var t,n,i=e.track,o=e.isLocal,c=e.priority,l=Object(a.useRef)(null),u=W(i),s=function(e){var t=Object(a.useState)(null===e||void 0===e?void 0:e.dimensions),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(null===e||void 0===e?void 0:e.dimensions),e){var t=function(e){return i(null===e||void 0===e?void 0:e.dimensions)};return e.on("dimensionsChanged",t),function(){e.off("dimensionsChanged",t)}}}),[e]),r}(i),d=(null!==(t=null===s||void 0===s?void 0:s.height)&&void 0!==t?t:0)>(null!==(n=null===s||void 0===s?void 0:s.width)&&void 0!==n?n:0);Object(a.useEffect)((function(){var e=l.current;return e.muted=!0,i.setPriority&&c&&i.setPriority(c),i.attach(e),function(){i.detach(e),i.setPriority&&c&&i.setPriority(null)}}),[i,c]);var m="environment"!==(null===u||void 0===u?void 0:u.getSettings().facingMode),f={transform:o&&m?"rotateY(180deg)":"",objectFit:d||i.name.includes("screen")?"contain":"cover"};return r.a.createElement(ye,{ref:l,style:f})}var Pe=Object(d.a)({preview:{width:"300px",maxHeight:"200px",margin:"0.5em auto","& video":{maxHeight:"200px"}}});function _e(){var e=Pe(),t=_(),n=I().localTracks.find((function(e){return"video"===e.kind})),a=W(n),i=null===a||void 0===a?void 0:a.getSettings().deviceId;return r.a.createElement("div",null,n&&r.a.createElement("div",{className:e.preview},r.a.createElement(Te,{isLocal:!0,track:n})),t.length>1?r.a.createElement(Ce.a,{fullWidth:!0},r.a.createElement(Oe.a,{variant:"subtitle2",gutterBottom:!0},"Video Input"),r.a.createElement(Se.a,{onChange:function(e){return t=e.target.value,window.localStorage.setItem("TwilioVideoApp-selectedVideoInput",t),void n.restart(Object(j.a)(Object(j.a)({},k),{},{deviceId:{exact:t}}));var t},value:i||"",variant:"outlined"},t.map((function(e){return r.a.createElement(je.a,{value:e.deviceId,key:e.deviceId},e.label)})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"subtitle2",gutterBottom:!0},"Video Input"),r.a.createElement(Oe.a,null,(null===n||void 0===n?void 0:n.mediaStreamTrack.label)||"No Local Video")))}var Ne=Object(d.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(u.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(u.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(u.a)({},e.breakpoints.down("xs"),{margin:"16px"}),headline:{marginBottom:"1.3em",fontSize:"1.1rem"},listSection:{margin:"2em 0 0.8em","&:first-child":{margin:"1em 0 2em 0"}}}}));function Le(e){var t=e.open,n=e.onClose,a=Ne();return r.a.createElement(F.a,{open:t,onClose:n,classes:{paper:a.paper}},r.a.createElement(Y.a,null,"Audio and Video Settings"),r.a.createElement(q.a,null),r.a.createElement(K.a,{className:a.container},r.a.createElement("div",{className:a.listSection},r.a.createElement(Oe.a,{variant:"h6",className:a.headline},"Video"),r.a.createElement(_e,null)),r.a.createElement(q.a,null),r.a.createElement("div",{className:a.listSection},r.a.createElement(Oe.a,{variant:"h6",className:a.headline},"Audio"),r.a.createElement(ke,null)),r.a.createElement("div",{className:a.listSection},r.a.createElement(xe,null))),r.a.createElement(q.a,null),r.a.createElement(U.a,null,r.a.createElement(f.a,{color:"primary",variant:"contained",className:a.button,onClick:n},"Done")))}var Ae=n(85),De=n.n(Ae),Re=n(172),Be=n(84),Ie=n.n(Be),Me=n(360);function ze(e){var t=Object(Me.a)((function(e){return e.breakpoints.down("sm")})),n=Object(a.useState)(!1),i=Object(p.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(!1),u=Object(p.a)(l,2),s=u[0],d=u[1],m=Object(a.useState)(!1),v=Object(p.a)(m,2),b=v[0],h=v[1],g=Object(a.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{onClick:function(){return d((function(e){return!e}))},ref:g,className:e.buttonClassName},t?r.a.createElement(Ie.a,null):r.a.createElement(r.a.Fragment,null,"Settings",r.a.createElement(De.a,null))),r.a.createElement(Re.a,{open:s,onClose:function(){return d((function(e){return!e}))},anchorEl:g.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:t?-55:"bottom",horizontal:"center"}},r.a.createElement(je.a,{onClick:function(){return c(!0)}},r.a.createElement(Oe.a,{variant:"body1"},"About")),r.a.createElement(je.a,{onClick:function(){return h(!0)}},r.a.createElement(Oe.a,{variant:"body1"},"Audio and Video Settings"))),r.a.createElement(me,{open:o,onClose:function(){c(!1),d(!1)}}),r.a.createElement(Le,{open:b,onClose:function(){h(!1),d(!1)}}))}function He(){var e=I().room,t=Object(a.useState)("disconnected"),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){return i(e.state||"disconnected")};return t(),e.on("disconnected",t).on("reconnected",t).on("reconnecting",t),function(){e.off("disconnected",t).off("reconnected",t).off("reconnecting",t)}}),[e]),r}var We=n(368);function Ve(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"17",viewBox:"0 0 12 17"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M11.389 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09C2.395 12.836 0 10.281 0 7.167c0-.276.224-.5.5-.5s.5.224.5.5c0 2.73 2.214 4.944 4.944 4.944 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM5.944 0C7.51 0 8.778 1.268 8.778 2.833v4.334C8.778 8.73 7.51 10 5.944 10 4.38 10 3.111 8.73 3.111 7.167V2.833C3.111 1.268 4.38 0 5.944 0zm0 1c-1.012 0-1.833.82-1.833 1.833v4.334C4.111 8.179 4.933 9 5.944 9c1.013 0 1.834-.82 1.834-1.833V2.833C7.778 1.82 6.958 1 5.944 1z"}))}function Fe(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#707578",d:"M11.889 6.667c.276 0 .5.224.5.5 0 3.114-2.396 5.67-5.445 5.923v2.632c0 .276-.223.5-.5.5-.245 0-.45-.177-.491-.41l-.009-.09V13.09c-1.116-.093-2.145-.494-3-1.119l.717-.717c.793.54 1.751.857 2.783.857 2.731 0 4.945-2.214 4.945-4.944 0-.276.224-.5.5-.5zM1 6.667c.276 0 .5.224.5.5 0 .975.282 1.884.77 2.65l-.722.721C.888 9.58.5 8.418.5 7.167c0-.276.224-.5.5-.5zm8.277-1.031v1.53C9.278 8.732 8.01 10 6.445 10c-.446 0-.868-.103-1.243-.287l.776-.773c.149.039.306.06.467.06.963 0 1.751-.74 1.828-1.683l.006-.15v-.531l1-1zM6.444 0C8.01 0 9.278 1.268 9.278 2.833l-.002-.025-.999.999v-.974c0-.962-.74-1.75-1.682-1.827L6.445 1c-.962 0-1.751.74-1.828 1.683l-.006.15v4.334c0 .097.008.192.022.285l-.804.805c-.112-.269-.184-.558-.209-.86l-.009-.23V2.833C3.611 1.268 4.88 0 6.444 0z",transform:"translate(6.5 4)"}),r.a.createElement("path",{fill:"red",d:"M12.146.646c.196-.195.512-.195.708 0 .173.174.192.443.057.638l-.057.07-12 12c-.196.195-.512.195-.708 0-.173-.174-.192-.443-.057-.638l.057-.07 12-12z",transform:"translate(6.5 4)"})))}function Ue(e){var t=function(){var e=I().localTracks.find((function(e){return"audio"===e.kind}));return[ve(e),Object(a.useCallback)((function(){e&&(e.isEnabled?e.disable():e.enable())}),[e])]}(),n=Object(p.a)(t,2),i=n[0],o=n[1],c=I().localTracks.some((function(e){return"audio"===e.kind}));return r.a.createElement(f.a,{className:e.className,onClick:o,disabled:!c||e.disabled,startIcon:i?r.a.createElement(Ve,null):r.a.createElement(Fe,null),"data-cy-audio-toggle":!0},c?i?"Mute":"Unmute":"No Audio")}function Ke(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#707578",d:"M10.503.85c.32 0 .611.125.827.329l-.696.697c-.025-.018-.053-.032-.084-.038l-.047-.006H1.207c-.102 0-.19.071-.216.165l-.008.059v7.866c0 .101.07.189.165.215l.059.008h1.156l-.983.983h-.173c-.624 0-1.139-.476-1.2-1.083L0 9.922V2.056C0 1.433.476.917 1.084.856l.123-.007h9.296zm5.49 1.124l.007.082v7.866c0 .337-.328.566-.635.47l-.076-.03-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H4.16l.984-.983h5.359c.101 0 .189-.07.215-.164l.008-.06V4.564l.983-.982.353-.353 3.227-1.612c.301-.15.652.04.704.358zm-.977.876L11.71 4.504v2.967l3.307 1.654V2.85z",transform:"translate(4 6)"}),r.a.createElement("path",{fill:"red",fillRule:"nonzero",d:"M13.06.144c.192-.192.503-.192.695 0 .171.17.19.436.057.627l-.057.068-12.29 12.29c-.192.193-.503.193-.695 0-.171-.17-.19-.435-.057-.626l.057-.069L13.06.144z",transform:"translate(4 6)"})))}function Ge(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M15.003 7c.665 0 1.206.542 1.206 1.207v1.349l3.58-1.789c.301-.15.652.04.704.358l.007.082v7.866c0 .365-.385.603-.711.44l-3.58-1.79v1.35c0 .623-.476 1.138-1.083 1.2l-.123.006H5.707c-.665 0-1.207-.542-1.207-1.206V8.207C4.5 7.542 5.042 7 5.707 7zm0 .983H5.707c-.122 0-.224.102-.224.224v7.866c0 .121.102.223.224.223h9.296c.122 0 .223-.102.223-.223V8.207c0-.122-.101-.224-.223-.224zm4.513 1.019l-3.307 1.654v2.968l3.307 1.653V9.002z"}))}function Ye(e){var t=C(),n=Object(p.a)(t,2),i=n[0],o=n[1],c=Object(a.useRef)(0),l=L(),u=Object(a.useCallback)((function(){Date.now()-c.current>500&&(c.current=Date.now(),o())}),[o]);return r.a.createElement(f.a,{className:e.className,onClick:u,disabled:!l||e.disabled,startIcon:i?r.a.createElement(Ge,null):r.a.createElement(Ke,null)},l?i?"Stop Video":"Start Video":"No Video")}function qe(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"#707578",fillRule:"evenodd",d:"M17.657 6.343c3.124 3.124 3.124 8.19 0 11.314-3.124 3.124-8.19 3.124-11.314 0-3.124-3.124-3.124-8.19 0-11.314 3.124-3.124 8.19-3.124 11.314 0zm-10.444.87c-2.643 2.644-2.643 6.93 0 9.574 2.644 2.643 6.93 2.643 9.574 0 2.57-2.57 2.641-6.693.214-9.35l-.214-.224L16.563 7c-2.657-2.427-6.78-2.356-9.35.214zm4.865.484l.02.003.026.005.041.01c.025.007.045.014.063.021l.043.019c.018.009.036.019.053.03.01.005.02.012.03.02.027.019.053.04.077.063l2.773 2.774c.24.24.24.63 0 .87-.213.214-.545.237-.785.071l-.085-.07-1.719-1.72v5.9c0 .34-.275.615-.615.615-.302 0-.553-.218-.605-.505l-.01-.11-.001-5.9-1.718 1.72c-.24.24-.63.24-.87 0-.214-.215-.238-.546-.072-.786l.072-.085 2.769-2.77.015-.014c.02-.018.04-.035.062-.05l.005-.004.008-.006c.027-.018.055-.034.085-.048l.034-.015.059-.02.032-.008c.021-.005.044-.008.068-.011l.038-.003H12.025l.027.002.026.002z"}))}var Ze=n(375);function Je(){var e=I().room,t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if("connected"===e.state){var t=function(){i(Array.from(e.participants.values()).concat(e.localParticipant).find((function(e){return Array.from(e.tracks.values()).find((function(e){return e.trackName.includes("screen")}))})))};return t(),e.on("trackPublished",t),e.on("trackUnpublished",t),e.on("participantDisconnected",t),e.localParticipant.on("trackPublished",t),e.localParticipant.on("trackUnpublished",t),function(){e.off("trackPublished",t),e.off("trackUnpublished",t),e.off("participantDisconnected",t),e.localParticipant.off("trackPublished",t),e.localParticipant.off("trackUnpublished",t)}}}),[e]),r}var Qe=Object(d.a)((function(e){return Object(m.a)({button:{margin:e.spacing(1),"&[disabled]":{color:"#bbb","& svg *":{fill:"#bbb"}}}})}));function Xe(e){var t=Qe(),n=Je(),a=I().toggleScreenShare,i=Boolean(n),o=navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia,c=e.disabled||i||!o,l="";return i&&(l="Cannot share screen when another user is sharing"),o||(l="Screen sharing is not supported with this browser"),r.a.createElement(Ze.a,{title:l,placement:"top",PopperProps:{disablePortal:!0},style:{cursor:c?"not-allowed":"pointer"}},r.a.createElement("span",null,r.a.createElement(f.a,{className:t.button,onClick:a,disabled:c,startIcon:r.a.createElement(qe,null),"data-cy-share-screen":!0},"Share Screen")))}var $e=Object(d.a)((function(e){return Object(m.a)({container:Object(u.a)({backgroundColor:e.palette.background.default,bottom:0,left:0,right:0,height:"".concat(e.footerHeight,"px"),position:"fixed",display:"flex",padding:"0 1.43em",zIndex:10},e.breakpoints.down("sm"),{height:"".concat(e.mobileFooterHeight,"px"),padding:0}),screenShareBanner:{position:"fixed",zIndex:10,bottom:"".concat(e.footerHeight,"px"),left:0,right:0,height:"104px",background:"rgba(0, 0, 0, 0.5)","& h6":{color:"white"},"& button":{background:"white",color:e.brand,border:"2px solid ".concat(e.brand),margin:"0 2em","&:hover":{color:"#600101",border:"2px solid #600101",background:"#FFE9E7"}}},hideMobile:Object(u.a)({display:"initial"},e.breakpoints.down("sm"),{display:"none"})})}));function et(){var e=$e(),t=I(),n=t.isSharingScreen,a=t.toggleScreenShare,i="reconnecting"===He(),o=I().room;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(we.a,{container:!0,justify:"center",alignItems:"center",className:e.screenShareBanner},r.a.createElement(Oe.a,{variant:"h6"},"You are sharing your screen"),r.a.createElement(f.a,{onClick:function(){return a()}},"Stop Sharing")),r.a.createElement("footer",{className:e.container},r.a.createElement(we.a,{container:!0,justify:"space-around",alignItems:"center"},r.a.createElement(We.a,{smDown:!0},r.a.createElement(we.a,{style:{flex:1}},r.a.createElement(Oe.a,{variant:"body1"},o.name))),r.a.createElement(we.a,{item:!0},r.a.createElement(we.a,{container:!0,justify:"center"},r.a.createElement(Ue,{disabled:i}),r.a.createElement(Ye,{disabled:i}),r.a.createElement(We.a,{smDown:!0},!n&&r.a.createElement(Xe,{disabled:i})),r.a.createElement(V,null))),r.a.createElement(We.a,{smDown:!0},r.a.createElement(we.a,{style:{flex:1}},r.a.createElement(we.a,{container:!0,justify:"flex-end"},r.a.createElement(ze,null),r.a.createElement(z,null)))))))}var tt=Object(d.a)((function(e){return{container:Object(u.a)({background:"white",paddingLeft:"1em",display:"none",height:"".concat(e.mobileTopBarHeight,"px")},e.breakpoints.down("sm"),{display:"flex"}),endCallButton:{height:"28px",fontSize:"0.85rem",padding:"0 0.6em"},settingsButton:Object(u.a)({},e.breakpoints.down("sm"),{height:"28px",minWidth:"28px",border:"1px solid rgb(136, 140, 142)",padding:0,margin:"0 1em"})}}));function nt(){var e=tt(),t=I().room;return r.a.createElement(we.a,{container:!0,alignItems:"center",justify:"space-between",className:e.container},r.a.createElement(Oe.a,{variant:"subtitle1"},t.name),r.a.createElement("div",null,r.a.createElement(z,{className:e.endCallButton}),r.a.createElement(ze,{buttonClassName:e.settingsButton})))}function at(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"73",height:"73",viewBox:"0 0 73 73"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("circle",{cx:"36.5",cy:"36.5",r:"36.5",fill:"#FFF"}),r.a.createElement("path",{fill:"#282A2B",strokeLinejoin:"round",d:"M30.973 23.925c-3.162 3.794-3.162 9.886 0 13.68l.262.301c.266.293.548.564.842.812l.192.154v2.95l-6.71 2.397-.213.082c-2.03.834-3.346 2.793-3.346 4.97v2.766c0 .532.431.963.963.963h27.874c.531 0 .962-.431.962-.963V49.27l-.005-.228-.015-.233c-.187-2.092-1.562-3.883-3.539-4.59l-6.71-2.397v-2.95l.192-.154c.393-.33.762-.702 1.104-1.112 3.162-3.795 3.162-9.887 0-13.681-3.25-3.9-8.603-3.9-11.853 0zm10.374 1.232c2.567 3.08 2.567 8.135 0 11.216-.404.484-.85.894-1.328 1.226-.26.18-.414.476-.414.791v4.111c0 .407.255.77.639.907l7.348 2.625c1.314.47 2.213 1.687 2.278 3.077l.004.183v1.781h-25.95l.002-1.804c0-1.394.843-2.65 2.131-3.18l.172-.065 7.327-2.617c.383-.137.639-.5.639-.907v-4.11c0-.316-.155-.612-.415-.792-.478-.332-.924-.742-1.328-1.226-2.567-3.08-2.567-8.135 0-11.216 2.427-2.912 6.248-2.974 8.735-.186l.16.186z"})))}function rt(){var e=I().localTracks.find((function(e){return"audio"===e.kind}));return r.a.createElement(Ee,{audioTrack:e})}var it=Object(d.a)((function(e){return{container:{position:"relative",height:0,overflow:"hidden",paddingTop:"".concat(56.25,"%"),background:"black"},innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},identityContainer:{position:"absolute",bottom:0,zIndex:1},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},avatarContainer:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}})}}));function ot(e){var t=e.identity,n=it(),a=I().localTracks.find((function(e){return e.name.includes("camera")}));return r.a.createElement("div",{className:n.container},r.a.createElement("div",{className:n.innerContainer},a?r.a.createElement(Te,{track:a,isLocal:!0}):r.a.createElement("div",{className:n.avatarContainer},r.a.createElement(at,null))),r.a.createElement("div",{className:n.identityContainer},r.a.createElement("span",{className:n.identity},r.a.createElement(rt,null),r.a.createElement(Oe.a,{variant:"body1",color:"inherit",component:"span"},t))))}var ct=n(376),lt=n(377),ut=[{label:"Low (160 x 90)",value:"low",resolution:{width:160,height:90}},{label:"CIF (352 x 288)",value:"cif",resolution:{width:352,height:288}},{label:"VGA (640 x 480)",value:"vga",resolution:{width:640,height:480}},{label:"WVGA (800 x 480)",value:"wvga",resolution:{width:800,height:480}},{label:"HD 540P (960 x 540)",value:"540p",resolution:{width:960,height:540}},{label:"HD 720P (1280 x 720)",value:"720p",resolution:{width:1280,height:720}},{label:"HD 960P (1280 x 960)",value:"960p",resolution:{width:1280,height:960}},{label:"HD Standard 1080P (1440 x 1080)",value:"standard1080p",resolution:{width:1440,height:1080}},{label:"HD Widescreen 1080P (1920 x 1080)",value:"wide1080p",resolution:{width:1920,height:1080}},{label:"Server Default",value:"default",resolution:void 0}];function st(e){var t;if("undefined"!==typeof e)return null===(t=ut.find((function(t){return t.value===e})))||void 0===t?void 0:t.resolution}var dt=Object(d.a)((function(e){var t;return{container:(t={width:"600px",minHeight:"400px"},Object(u.a)(t,e.breakpoints.down("xs"),{width:"calc(100vw - 32px)"}),Object(u.a)(t,"& .inputSelect",{width:"calc(100% - 35px)"}),t),button:{float:"right"},paper:Object(u.a)({},e.breakpoints.down("xs"),{margin:"16px"}),formControl:{display:"block",margin:"1.5em 0","&:first-child":{margin:"0 0 1.5em 0"}},label:{width:"133%"}}})),mt=function(e){return"undefined"===typeof e?"default":e},ft=ut.map((function(e){var t=e.label,n=e.value;return r.a.createElement(je.a,{value:n,key:n},t)}));function vt(e){var t=e.open,n=e.onClose,i=dt(),o=de(),c=o.settings,l=o.dispatchSetting,u="disconnected"!==He(),s=Object(a.useCallback)((function(e){l({name:e.target.name,value:e.target.value})}),[l]),d=Object(a.useCallback)((function(e){/[^\d]/.test(e.target.value)||s(e)}),[s]);return r.a.createElement(F.a,{open:t,onClose:n,classes:{paper:i.paper}},r.a.createElement(Y.a,null,"Connection Settings"),r.a.createElement(q.a,null),r.a.createElement(K.a,{className:i.container},r.a.createElement(we.a,{container:!0,spacing:2},r.a.createElement(we.a,{item:!0,xs:12},r.a.createElement(Oe.a,{hidden:!u,variant:"body2"},"These settings cannot be changed when connected to a room.")),r.a.createElement(we.a,{item:!0,sm:6,xs:12},r.a.createElement(Ce.a,{className:i.formControl},r.a.createElement(ct.a,{id:ee.dominantSpeakerPriority},"Dominant Speaker Priority:"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.dominantSpeakerPriority,label:ee.dominantSpeakerPriority,value:mt(c.dominantSpeakerPriority),onChange:s},r.a.createElement(je.a,{value:"low"},"Low"),r.a.createElement(je.a,{value:"standard"},"Standard"),r.a.createElement(je.a,{value:"high"},"High"),r.a.createElement(je.a,{value:"default"},"Server Default"))),r.a.createElement(Ce.a,{className:i.formControl},r.a.createElement(ct.a,{id:ee.trackSwitchOffMode},"Track Switch Off Mode:"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.trackSwitchOffMode,label:ee.trackSwitchOffMode,value:mt(c.trackSwitchOffMode),onChange:s},r.a.createElement(je.a,{value:"predicted"},"Predicted"),r.a.createElement(je.a,{value:"detected"},"Detected"),r.a.createElement(je.a,{value:"disabled"},"Disabled"),r.a.createElement(je.a,{value:"default"},"Server Default"))),r.a.createElement(Ce.a,{className:i.formControl},r.a.createElement(ct.a,{id:ee.bandwidthProfileMode},"Mode:"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.bandwidthProfileMode,label:ee.bandwidthProfileMode,value:mt(c.bandwidthProfileMode),onChange:s},r.a.createElement(je.a,{value:"grid"},"Grid"),r.a.createElement(je.a,{value:"collaboration"},"Collaboration"),r.a.createElement(je.a,{value:"presentation"},"Presentation"),r.a.createElement(je.a,{value:"default"},"Server Default"))),r.a.createElement(Ce.a,{className:i.formControl},r.a.createElement(lt.a,{disabled:u,fullWidth:!0,id:ee.maxTracks,label:"Max Tracks",placeholder:"Leave blank for no limit",name:ee.maxTracks,value:mt(c.maxTracks),onChange:d})),r.a.createElement(Ce.a,{className:i.formControl},r.a.createElement(lt.a,{disabled:u,fullWidth:!0,id:ee.maxAudioBitrate,label:"Max Audio Bitrate",placeholder:"Leave blank for no limit",name:ee.maxAudioBitrate,value:mt(c.maxAudioBitrate),onChange:d}))),r.a.createElement(we.a,{item:!0,sm:6,xs:12},r.a.createElement(Ce.a,{fullWidth:!0,className:i.formControl},r.a.createElement(ct.a,{id:ee.renderDimensionLow,className:i.label},"Render Dimension (Low Priority):"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.renderDimensionLow,label:ee.renderDimensionLow,value:mt(c.renderDimensionLow),onChange:s},ft)),r.a.createElement(Ce.a,{fullWidth:!0,className:i.formControl},r.a.createElement(ct.a,{id:ee.renderDimensionStandard,className:i.label},"Render Dimension (Standard Priority):"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.renderDimensionStandard,label:ee.renderDimensionStandard,value:mt(c.renderDimensionStandard),onChange:s},ft)),r.a.createElement(Ce.a,{fullWidth:!0,className:i.formControl},r.a.createElement(ct.a,{id:ee.renderDimensionHigh,className:i.label},"Render Dimension (High Priority):"),r.a.createElement(Se.a,{fullWidth:!0,disabled:u,name:ee.renderDimensionHigh,label:ee.renderDimensionHigh,value:mt(c.renderDimensionHigh),onChange:s},ft))))),r.a.createElement(q.a,null),r.a.createElement(U.a,null,r.a.createElement(f.a,{className:i.button,color:"primary",variant:"contained",onClick:n},"Done")))}function pt(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("g",{fill:"#707578"},r.a.createElement("path",{d:"M10 .833c.276 0 .5.224.5.5l-.001 1.775.16.042c.423.113.775.226 1.072.35l.121.054 1.273-1.272c.173-.173.442-.192.637-.057l.07.057 1.886 1.886c.195.196.195.512 0 .708l-1.273 1.27.055.123c.125.297.238.65.351 1.073l.041.158h1.775c.245 0 .45.177.492.41l.008.09v2c0 .276-.224.5-.5.5H14.89l-.03.118c-.115.431-.231.798-.358 1.103l-.058.131 1.273 1.273c.173.174.192.443.057.638l-.057.07-1.886 1.885c-.195.195-.511.195-.707 0l-1.273-1.272-.12.053c-.296.125-.648.238-1.071.352l-.162.041.001 1.775c0 .245-.177.45-.41.492l-.09.008H8c-.276 0-.5-.224-.5-.5l-.001-1.775-.161-.042c-.425-.114-.776-.227-1.072-.351l-.12-.054-1.271 1.272c-.174.174-.443.193-.638.058l-.07-.057-1.885-1.886c-.195-.195-.196-.512 0-.707l1.272-1.273-.053-.12c-.125-.296-.238-.648-.352-1.071l-.042-.161H1.333c-.245 0-.45-.177-.492-.41L.833 10V8c0-.276.224-.5.5-.5h1.774l.042-.16c.114-.424.227-.776.352-1.072l.052-.121-1.271-1.271c-.174-.174-.193-.443-.058-.638l.058-.07 1.886-1.886c.195-.195.512-.195.707 0l1.272 1.272.121-.053c.297-.125.65-.238 1.073-.351l.158-.042.001-1.775c0-.245.177-.45.41-.492L8 .833zm-.501 1h-1L8.5 3.499c0 .202-.121.38-.302.459l-.08.027c-.857.206-1.458.397-1.805.608-.197.12-.45.09-.614-.073L4.521 3.342 3.342 4.521 4.52 5.699c.14.14.182.347.116.527l-.043.087c-.211.347-.402.947-.61 1.805-.054.224-.255.382-.486.382H1.833v1h1.664c.202 0 .381.121.46.301l.026.081c.208.858.399 1.458.61 1.805.12.197.09.45-.073.614l-1.178 1.177 1.178 1.179 1.178-1.178c.14-.14.347-.182.528-.115l.087.042c.277.17.714.325 1.32.487l.485.124c.224.054.382.255.382.486l-.001 1.663h1l.001-1.663c0-.202.121-.381.301-.46l.081-.026c.858-.208 1.458-.399 1.804-.61.197-.12.45-.09.614.073l1.178 1.177 1.179-1.179-1.177-1.177c-.14-.14-.182-.347-.116-.527l.043-.087c.189-.31.37-.852.554-1.577l.056-.23c.055-.223.256-.38.486-.38h1.663v-1h-1.664c-.202 0-.381-.121-.46-.302l-.026-.08c-.206-.854-.398-1.458-.61-1.806-.12-.197-.09-.45.074-.614l1.176-1.177-1.178-1.178L12.3 4.52c-.14.14-.346.182-.526.116l-.088-.043c-.277-.169-.717-.325-1.32-.486l-.483-.122C9.658 3.93 9.5 3.73 9.5 3.499l-.001-1.666zm1.976 4.692c1.367 1.367 1.367 3.583 0 4.95s-3.583 1.367-4.95 0-1.367-3.583 0-4.95 3.583-1.367 4.95 0zm-4.243.707c-.976.977-.976 2.56 0 3.536.977.976 2.56.976 3.536 0 .934-.934.974-2.423.122-3.405l-.122-.13-.13-.123c-.983-.852-2.472-.812-3.406.122z",transform:"translate(-636 -585) translate(276 301) translate(360 284) translate(3 3)"}))))}var bt=Object(d.a)((function(e){return{settingsButton:{margin:"1.8em 0 0"}}}));function ht(e){var t=e.mobileButtonClass,n=bt(),i=de().roomType,o=Object(Me.a)((function(e){return e.breakpoints.down("sm")})),c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(a.useState)(!1),m=Object(p.a)(d,2),v=m[0],b=m[1],h=Object(a.useState)(!1),g=Object(p.a)(h,2),E=g[0],O=g[1],w=Object(a.useState)(!1),C=Object(p.a)(w,2),S=C[0],j=C[1],k=Object(a.useRef)(null);return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(f.a,{ref:k,onClick:function(){return s(!0)},startIcon:r.a.createElement(Ie.a,null),className:t},"More"):r.a.createElement(f.a,{ref:k,onClick:function(){return s(!0)},startIcon:r.a.createElement(pt,null),className:n.settingsButton},"Settings"),r.a.createElement(Re.a,{open:u,onClose:function(){return s((function(e){return!e}))},anchorEl:k.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:o?"left":"right"},transformOrigin:{vertical:o?-55:-45,horizontal:"center"}},r.a.createElement(je.a,{onClick:function(){return b(!0)}},r.a.createElement(Oe.a,{variant:"body1"},"About")),r.a.createElement(je.a,{onClick:function(){return O(!0)}},r.a.createElement(Oe.a,{variant:"body1"},"Audio and Video Settings")),"peer-to-peer"!==i&&"go"!==i&&r.a.createElement(je.a,{onClick:function(){return j(!0)}},r.a.createElement(Oe.a,{variant:"body1"},"Connection Settings"))),r.a.createElement(me,{open:v,onClose:function(){b(!1),s(!1)}}),r.a.createElement(Le,{open:E,onClose:function(){O(!1),s(!1)}}),r.a.createElement(vt,{open:S,onClose:function(){j(!1),s(!1)}}))}var gt=Object(d.a)((function(e){return{gutterBottom:{marginBottom:"1em"},marginTop:{marginTop:"1em"},deviceButton:{width:"100%",border:"2px solid #aaa",margin:"1em 0"},localPreviewContainer:Object(u.a)({paddingRight:"2em"},e.breakpoints.down("sm"),{padding:"0 2.5em"}),joinButtons:Object(u.a)({display:"flex",justifyContent:"space-between"},e.breakpoints.down("sm"),{flexDirection:"column-reverse",width:"100%","& button":{margin:"0.5em 0"}}),mobileButtonBar:Object(u.a)({},e.breakpoints.down("sm"),{display:"flex",justifyContent:"space-between",margin:"1.5em 0 1em"}),mobileButton:{padding:"0.8em 0",margin:0}}}));function Et(e){var t=e.name,n=e.roomName,a=e.setStep,i=gt(),o=de(),c=o.getToken,l=o.isFetching,u=I(),s=u.connect,d=u.isAcquiringLocalTracks,m=u.isConnecting,v=l||d||m;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"h5",className:i.gutterBottom},"Join ",n),r.a.createElement(we.a,{container:!0,justify:"center"},r.a.createElement(we.a,{item:!0,md:7,sm:12,xs:12},r.a.createElement("div",{className:i.localPreviewContainer},r.a.createElement(ot,{identity:t})),r.a.createElement("div",{className:i.mobileButtonBar},r.a.createElement(We.a,{mdUp:!0},r.a.createElement(Ue,{className:i.mobileButton,disabled:v}),r.a.createElement(Ye,{className:i.mobileButton,disabled:v})),r.a.createElement(ht,{mobileButtonClass:i.mobileButton}))),r.a.createElement(we.a,{item:!0,md:5,sm:12,xs:12},r.a.createElement(we.a,{container:!0,direction:"column",justify:"space-between",style:{height:"100%"}},r.a.createElement("div",null,r.a.createElement(We.a,{smDown:!0},r.a.createElement(Ue,{className:i.deviceButton,disabled:v}),r.a.createElement(Ye,{className:i.deviceButton,disabled:v}))),r.a.createElement("div",{className:i.joinButtons},r.a.createElement(f.a,{variant:"outlined",color:"primary",onClick:function(){return a(en.roomNameStep)}},"Cancel"),r.a.createElement(f.a,{variant:"contained",color:"primary","data-cy-join-now":!0,onClick:function(){c(t,n).then((function(e){return s(e)}))},disabled:v},"Join Now"))))))}function Ot(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",viewBox:"0 0 96 96"},r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#FFF",d:"M43.86 0h8.28c11.661 0 18.564 1.74 24.675 5.01 6.112 3.267 10.908 8.063 14.175 14.175C94.26 25.295 96 32.197 96 43.86v8.28c0 11.661-1.74 18.564-5.01 24.675-3.267 6.112-8.063 10.908-14.175 14.175C70.704 94.26 63.801 96 52.14 96h-8.28c-11.661 0-18.564-1.74-24.675-5.01-6.112-3.267-10.908-8.063-14.175-14.175C1.74 70.705 0 63.803 0 52.14v-8.28c0-11.661 1.74-18.564 5.01-24.675C8.277 13.073 13.073 8.277 19.185 5.01 25.295 1.74 32.197 0 43.86 0z"}),r.a.createElement("path",{fill:"#F22F46",d:"M53.25 63h-25.5C25.679 63 24 61.321 24 59.25v-22.5c0-2.071 1.679-3.75 3.75-3.75h25.5c2.071 0 3.75 1.679 3.75 3.75v5.82l9.57-4.785c1.164-.583 2.546-.521 3.653.164 1.107.685 1.78 1.894 1.777 3.196V54.87c.008 1.3-.66 2.512-1.766 3.198-1.105.686-2.487.747-3.65.162L57 53.49v5.76C57 61.321 55.32 63 53.25 63zm-25.5-27c-.414 0-.75.336-.75.75v22.5c0 .414.336.75.75.75h25.5c.414 0 .75-.336.75-.75v-8.175c-.001-.518.266-1 .705-1.275.44-.275.99-.303 1.455-.075L67.92 55.5c.224.123.496.123.72 0 .22-.141.356-.383.36-.645v-13.71c-.004-.262-.14-.504-.36-.645-.224-.123-.496-.123-.72 0l-11.745 5.865c-.47.236-1.028.21-1.473-.069-.445-.28-.711-.77-.702-1.296v-8.25c0-.414-.336-.75-.75-.75h-25.5z"})))}function wt(e){return r.a.createElement("svg",Object.assign({fill:"#F22F46",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30"},e),r.a.createElement("path",{d:"M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11zm6.8-14.7c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1 1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm0 7.4c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm-7.4 0c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm0-7.4c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1z"}))}var Ct=n(361),St=n(378),jt=n(312),kt=n(168),xt=n.n(kt),yt=Object(jt.a)({red:{color:"white",backgroundColor:"#F22F46"}});function Tt(e){var t=e.user,n=yt(),a=t,i=a.displayName,o=a.photoURL;return o?r.a.createElement(St.a,{src:o}):r.a.createElement(St.a,{className:n.red},i?i.split(" ").map((function(e){return e[0]})).join("").toUpperCase():r.a.createElement(xt.a,null))}var Pt=Object(d.a)({userContainer:{position:"absolute",top:0,right:0,margin:"1em",display:"flex",alignItems:"center"},userButton:{color:"white"},logoutLink:{color:"white",cursor:"pointer",padding:"10px 20px"}}),_t=function(){var e=Pt(),t=de(),n=t.user,i=t.signOut,o=I().localTracks,c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],d=Object(a.useRef)(null),m=Object(a.useCallback)((function(){o.forEach((function(e){return e.stop()})),null===i||void 0===i||i()}),[o,i]);return"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?r.a.createElement("div",{className:e.userContainer},r.a.createElement(Ct.a,{onClick:m,className:e.logoutLink},"Logout")):"firebase"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH?r.a.createElement("div",{className:e.userContainer},r.a.createElement(Tt,{user:n}),r.a.createElement(f.a,{onClick:function(){return s((function(e){return!e}))},ref:d,className:e.userButton},n.displayName,r.a.createElement(De.a,null)),r.a.createElement(Re.a,{open:u,onClose:function(){return s((function(e){return!e}))},anchorEl:d.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(je.a,{onClick:m},r.a.createElement(Oe.a,{variant:"body1"},"Logout")))):null},Nt=Object(d.a)((function(e){return{background:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgb(40, 42, 43)",height:"100%"},container:{position:"relative",flex:"1"},innerContainer:Object(u.a)({display:"flex",width:"888px",height:"379px",borderRadius:"8px",boxShadow:"0px 2px 4px 0px rgba(40, 42, 43, 0.3)",overflow:"hidden",position:"relative",margin:"auto"},e.breakpoints.down("sm"),{display:"block",height:"auto",width:"calc(100% - 40px)",margin:"auto",maxWidth:"400px"}),swooshContainer:Object(u.a)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='296' height='378' viewBox='0 0 296 378'%3E%3Cdefs%3E%3ClinearGradient id='utbttnlrpc' x1='78.976%25' x2='63.882%25' y1='60.873%25' y2='45.554%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3ClinearGradient id='aim8r3oczd' x1='78.976%25' x2='63.882%25' y1='56.106%25' y2='47.503%25'%3E%3Cstop offset='0%25' stop-opacity='0'/%3E%3Cstop offset='100%25'/%3E%3C/linearGradient%3E%3Cpath id='5tk4i6f80a' d='M0 0H296V378H0z'/%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cmask id='m1ihwluuxb' fill='%23fff'%3E%3Cuse xlink:href='%235tk4i6f80a'/%3E%3C/mask%3E%3Cuse fill='%23DE5858' xlink:href='%235tk4i6f80a'/%3E%3Cg mask='url(%23m1ihwluuxb)'%3E%3Cg%3E%3Cpath fill='url(%23utbttnlrpc)' d='M0 286.83c87.695-83.937 175.802-132.682 264.323-146.233 132.78-20.328 183.24 4.255 225.143-23.414 73.409-48.471 93.039-15.154 148.326-20.892 44.84-4.654 98.48-77.401 135.81-91.717C795.596-3.86 821.469.801 851.22 18.56L891 476.5H0V286.83z' opacity='.06' transform='translate(-457 -22.5)'/%3E%3Cpath fill='url(%23aim8r3oczd)' d='M137 604.5c63.759-109.686 155.8-165.124 276.126-166.315 180.488-1.786 157.888-146.686 387.11-146.33 229.223.356 170.665-151.786 341.36-166.888 113.797-10.068 180.265 10.685 199.404 62.26V604.5H137z' opacity='.08' transform='translate(-457 -22.5)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A\");",backgroundSize:"cover",width:"296px"},e.breakpoints.down("sm"),{width:"100%",height:"100px",backgroundPositionY:"140px"}),logoContainer:Object(u.a)({position:"absolute",width:"210px",textAlign:"center"},e.breakpoints.down("sm"),{display:"flex",alignItems:"center",width:"90%",textAlign:"initial","& svg":{height:"64px"}}),twilioLogo:{position:"absolute",top:0,left:0,margin:"20px"},content:Object(u.a)({background:"white",width:"100%",padding:"4em",flex:1},e.breakpoints.down("sm"),{padding:"2em"}),title:Object(u.a)({color:"white",margin:"1em 0 0"},e.breakpoints.down("sm"),{margin:0,fontSize:"1.1rem"}),subContentContainer:{position:"absolute",marginTop:"1em",width:"100%"}}})),Lt=function(e){var t=Nt(),n=de().user,a=Object(re.h)();return r.a.createElement("div",{className:t.background},r.a.createElement(wt,{className:t.twilioLogo}),n&&"/login"!==a.pathname&&r.a.createElement(_t,null),r.a.createElement("div",{className:t.container},r.a.createElement("div",{className:t.innerContainer},r.a.createElement("div",{className:t.swooshContainer},r.a.createElement("div",{className:t.logoContainer},r.a.createElement(Ot,null),r.a.createElement(Oe.a,{variant:"h6",className:t.title},"Twilio Programmable Video"))),r.a.createElement("div",{className:t.content},e.children)),e.subContent&&r.a.createElement("div",{className:t.subContentContainer},e.subContent)))},At=n(169),Dt=n.n(At);function Rt(){return r.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-299.000000, -723.000000)",fill:"#D61F1F"},r.a.createElement("g",{transform:"translate(276.000000, 704.000000)"},r.a.createElement("g",{transform:"translate(23.000000, 19.000000)"},r.a.createElement("path",{d:"M8.03935839,0.763849674 L13.2361503,5.96064161 C13.8101721,6.5346634 13.8101721,7.4653366 13.2361503,8.03935839 L8.03935839,13.2361503 C7.4653366,13.8101721 6.5346634,13.8101721 5.96064161,13.2361503 L0.763849674,8.03935839 C0.189827887,7.4653366 0.189827887,6.5346634 0.763849674,5.96064161 L5.96064161,0.763849674 C6.5346634,0.189827887 7.4653366,0.189827887 8.03935839,0.763849674 Z M7,8.66666667 C6.53976271,8.66666667 6.16666667,9.03976271 6.16666667,9.5 C6.16666667,9.96023729 6.53976271,10.3333333 7,10.3333333 C7.46023729,10.3333333 7.83333333,9.96023729 7.83333333,9.5 C7.83333333,9.03976271 7.46023729,8.66666667 7,8.66666667 Z M7.00842529,4.5 L6.99145559,4.5 C6.48802096,4.5 6.09771771,4.99363437 6.17690967,5.53663218 L6.53327351,7.40140326 C6.56721292,7.64822044 6.76519283,7.83333333 6.99711216,7.83333333 L7.00276873,7.83333333 C7.23468805,7.83333333 7.43266796,7.64822044 7.46660737,7.40140326 L7.82297121,5.53663218 C7.90216317,4.99363437 7.51751649,4.50617043 7.00842529,4.5 Z",id:"Error"}))))))}var Bt=n(362),It=n(370);function Mt(){return r.a.createElement("svg",{width:"16px",height:"14px",viewBox:"0 0 16 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-273.000000, -162.000000)",fill:"#E46216"},r.a.createElement("g",{transform:"translate(251.000000, 143.000000)"},r.a.createElement("g",{transform:"translate(22.000000, 19.000000)"},r.a.createElement("path",{d:"M6.68405227,0.743750848 C7.26590697,-0.247916949 8.73410873,-0.247916949 9.31596344,0.743750848 L9.31596344,0.743750848 L15.7980583,11.7915293 C16.3754418,12.775573 15.6458879,14 14.4821027,14 L14.4821027,14 L1.5178827,14 C0.354135396,14 -0.375441293,12.775573 0.201934693,11.7915293 L0.201934693,11.7915293 Z M8,10 C7.44771525,10 7,10.4477153 7,11 C7,11.5522847 7.44771525,12 8,12 C8.55228475,12 9,11.5522847 9,11 C9,10.4477153 8.55228475,10 8,10 Z M8.01011035,5 L7.98974671,5 L7.87816923,5.00681158 C7.32928042,5.07427655 6.92320065,5.63308608 7.01229161,6.24395862 L7.01229161,6.24395862 L7.43992821,8.48168391 L7.46058982,8.57746523 C7.53403676,8.82448556 7.74990819,9 8.00332247,9 L8.00332247,9 L8.09436762,8.9919759 C8.33199007,8.94972242 8.5237268,8.74495557 8.55992884,8.48168391 L8.55992884,8.48168391 L8.98756545,6.24395862 L8.99896034,6.12268979 C9.02431547,5.52149772 8.58283795,5.00694173 8.01011035,5 L8.01011035,5 Z"}))))))}var zt=Object(d.a)((function(e){return{container:Object(u.a)({display:"flex",alignItems:"baseline",justifyContent:"space-between",width:"400px",minHeight:"50px",background:"white",padding:"1em",borderRadius:"3px",boxShadow:"0 12px 24px 4px rgba(40,42,43,0.2)"},e.breakpoints.down("sm"),{width:"100%"}),contentContainer:{display:"flex"},iconContainer:{display:"flex",padding:"0 1.3em 0 0.3em",transform:"translateY(4px)"},headline:{fontWeight:"bold"},error:{borderLeft:"4px solid #D61F1F"},warning:{borderLeft:"4px solid #E46216"}}}));function Ht(e){var t,n=e.headline,a=e.message,i=e.variant,o=e.open,c=e.handleClose,l=zt();return r.a.createElement(It.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:function(e,t){"clickaway"!==t&&(null===c||void 0===c||c())}},r.a.createElement("div",{className:Object(v.a)(l.container,(t={},Object(u.a)(t,l.error,"error"===i),Object(u.a)(t,l.warning,"warning"===i),t))},r.a.createElement("div",{className:l.contentContainer},r.a.createElement("div",{className:l.iconContainer},"warning"===i&&r.a.createElement(Mt,null),"error"===i&&r.a.createElement(Rt,null)),r.a.createElement("div",null,r.a.createElement(Oe.a,{variant:"body1",className:l.headline,component:"span"},n),r.a.createElement(Oe.a,{variant:"body1",component:"span"}," ",a))),r.a.createElement("div",null,c&&r.a.createElement(Bt.a,{size:"small","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(Dt.a,{fontSize:"small"})))))}function Wt(e){var t=e.error,n=P().length>0,i=L(),o=I().isAcquiringLocalTracks,c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],d=!u&&!o&&(Boolean(t)||!n||!i),m=function(e,t,n){var a="",r="";switch(!0){case"NotAllowedError"===(null===n||void 0===n?void 0:n.name):a="Unable to Access Media:",r="Permission denied by system"===n.message?"The operating system has blocked the browser from accessing the microphone or camera. Please check your operating system settings.":"The user has denied permission to use audio and video. Please grant permission to the browser to access the microphone and camera.";break;case"NotFoundError"===(null===n||void 0===n?void 0:n.name):a="Cannot Find Microphone or Camera:",r="The browser cannot access the microphone or camera. Please make sure all input devices are connected and enabled.";break;case Boolean(n):a="Error Acquiring Media:",r="".concat(n.name," ").concat(n.message);break;case!e&&!t:a="No Camera or Microphone Detected:",r="Other participants in the room will be unable to see and hear you.";break;case!t:a="No Camera Detected:",r="Other participants in the room will be unable to see you.";break;case!e:a="No Microphone Detected:",r="Other participants in the room will be unable to hear you."}return{headline:a,message:r}}(n,i,t),f=m.headline,v=m.message;return r.a.createElement(Ht,{open:d,handleClose:function(){return s(!0)},headline:f,message:v,variant:"warning"})}var Vt=n(87);function Ft(e,t,n){return"undefined"===typeof e?qt.Green:e>=n?qt.Red:e>=t?qt.Yellow:qt.Green}var Ut=2*Math.PI*9,Kt=Object(d.a)((function(){return{svg:{transform:"rotate(-90deg)",marginRight:"0.6em",fill:"none"},innerCircle:{stroke:"rgb(200, 204, 207)"},circle:{stroke:"#027AC5",strokeDasharray:Ut,strokeDashoffset:"0px",animation:"".concat(Zt/1e3+1,"s $progress linear")},"@keyframes progress":{"0%":{strokeDashoffset:"".concat(Ut,"px")},"100%":{strokeDashoffset:"0px"}}}}));function Gt(){var e=Kt();return r.a.createElement("svg",{viewBox:"0 0 ".concat(24," ").concat(24),width:24,height:24,strokeWidth:"".concat(3,"px"),xmlns:"http://www.w3.org/2000/svg",className:e.svg},r.a.createElement("circle",{cx:12,cy:12,r:9,className:e.innerCircle}),r.a.createElement("circle",{cx:12,cy:12,r:9,className:e.circle}))}function Yt(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 28 28"},r.a.createElement("path",{fill:"#00994A",d:"M14 4.667c5.155 0 9.333 4.178 9.333 9.333S19.155 23.333 14 23.333 4.667 19.155 4.667 14 8.845 4.667 14 4.667zm3.496 5.833c-.31 0-.608.123-.827.343l-3.834 3.843-1.504-1.514c-.22-.22-.517-.342-.827-.342-.31 0-.608.123-.828.342-.22.22-.343.517-.343.827 0 .31.124.608.343.827l2.331 2.33c.108.109.237.195.38.254.141.06.294.09.448.09.153 0 .306-.03.448-.09.142-.059.27-.145.379-.255l4.662-4.659c.22-.219.343-.516.343-.826 0-.31-.124-.608-.343-.827-.22-.22-.517-.343-.828-.343z",transform:"translate(-588 -698) translate(588 698)"}))}var qt,Zt=1e4;!function(e){e[e.Red=0]="Red",e[e.Yellow=1]="Yellow",e[e.Green=2]="Green"}(qt||(qt={}));var Jt=Object(d.a)({iconContainer:{display:"flex",alignItems:"center",marginRight:"0.4em"},result:{color:"white"}});function Qt(e){var t=e.children,n=e.icon,a=Jt();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.iconContainer},n),r.a.createElement(Oe.a,{variant:"subtitle2",className:a.result},t))}function Xt(e){var t=e.networkCondition;return e.error?r.a.createElement(Qt,{icon:r.a.createElement(Rt,null)},"There was a problem connecting to the network"):t===qt.Red?r.a.createElement(Qt,{icon:r.a.createElement(Rt,null)},"Poor network conditions. You may experience poor call quality and reliability."):t===qt.Yellow?r.a.createElement(Qt,{icon:r.a.createElement(Mt,null)},"Poor network conditions. You may experience degraded video performance."):t===qt.Green?r.a.createElement(Qt,{icon:r.a.createElement(Yt,null)},"Your network connection is stable"):null}function $t(){var e=Jt(),t=function(){var e=de().getToken,t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(),c=Object(p.a)(o,2),l=c[0],u=c[1],s=Object(a.useState)(!1),d=Object(p.a)(s,2),m=d[0],f=d[1];return Object(a.useEffect)((function(){if(!m&&!r){var t="preflight-network-test-"+Object(Vt.a)();f(!0);var n="participant-"+Object(Vt.a)(),a="participant-"+Object(Vt.a)();Promise.all([e(n,t),e(a,t)]).then((function(e){i(e),f(!1)})).catch((function(e){return u(e)}))}}),[e,m,r]),{tokens:r,tokenError:l}}(),n=t.tokens,i=t.tokenError,o=function(e,t){var n=I().isConnecting,r=Object(a.useState)(),i=Object(p.a)(r,2),o=i[0],c=i[1],l=Object(a.useState)(),u=Object(p.a)(l,2),s=u[0],d=u[1],m=Object(a.useState)(!1),f=Object(p.a)(m,2),v=f[0],b=f[1],h=Object(a.useRef)();return Object(a.useEffect)((function(){var e,t,a;n&&(null===(e=h.current)||void 0===e||e.stop(),null===(t=h.current)||void 0===t||t.removeAllListeners("completed"),null===(a=h.current)||void 0===a||a.removeAllListeners("failed"))}),[n]),Object(a.useEffect)((function(){return function(){var e,t,n;null===(e=h.current)||void 0===e||e.stop(),null===(t=h.current)||void 0===t||t.removeAllListeners("completed"),null===(n=h.current)||void 0===n||n.removeAllListeners("failed")}}),[]),Object(a.useEffect)((function(){!e||!t||o||s||v||(b(!0),h.current=y.a.testPreflight(e,t,{duration:Zt}),h.current.on("completed",(function(e){c(e),b(!1),console.log("Preflight network test completed. See test report below:"),console.log(e)})).on("failed",(function(e){d(e),b(!1),console.log("Preflight network test failed. See error below:"),console.log(e)})))}),[e,t,o,s,v]),{testReport:o,testFailure:s,isTestRunning:v}}(null===n||void 0===n?void 0:n[0],null===n||void 0===n?void 0:n[1]),c=o.testFailure,l=o.testReport,u=function(e){var t;if(e){var n=null===(t=e.stats.rtt)||void 0===t?void 0:t.average,a=e.stats.jitter.average,r=e.stats.packetLoss.average;return Math.min(Ft(n,200,400),Ft(a,30,100),Ft(r,3,7))}}(l);return r.a.createElement(we.a,{container:!0,justify:"center",alignItems:"center",style:{height:"55px",paddingBottom:"1.5em"}},c||l?r.a.createElement(Xt,{networkCondition:u,error:i||c}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,null),r.a.createElement(Oe.a,{variant:"subtitle2",className:e.result},"Checking your network connection")))}var en,tn=Object(d.a)((function(e){return{gutterBottom:{marginBottom:"1em"},inputContainer:Object(u.a)({display:"flex",justifyContent:"space-between",margin:"1.5em 0 3.5em","& div:not(:last-child)":{marginRight:"1em"}},e.breakpoints.down("sm"),{margin:"1.5em 0 2em"}),textFieldContainer:{width:"100%"},continueButton:Object(u.a)({},e.breakpoints.down("sm"),{width:"100%"})}}));function nn(e){var t=e.name,n=e.roomName,a=e.setName,i=e.setRoomName,o=e.handleSubmit,c=tn(),l=de().user,u=!window.location.search.includes("customIdentity=true")&&(null===l||void 0===l?void 0:l.displayName);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"h5",className:c.gutterBottom},"Join a Room"),r.a.createElement(Oe.a,{variant:"body1"},u?"Enter the name of a room you'd like to join.":"Enter your name and the name of a room you'd like to join"),r.a.createElement("form",{onSubmit:o},r.a.createElement("div",{className:c.inputContainer},!u&&r.a.createElement("div",{className:c.textFieldContainer},r.a.createElement(ct.a,{shrink:!0,htmlFor:"input-user-name"},"Your Name"),r.a.createElement(lt.a,{id:"input-user-name",variant:"outlined",fullWidth:!0,size:"small",value:t,onChange:function(e){a(e.target.value)}})),r.a.createElement("div",{className:c.textFieldContainer},r.a.createElement(ct.a,{shrink:!0,htmlFor:"input-room-name"},"Room Name"),r.a.createElement(lt.a,{autoCapitalize:"false",id:"input-room-name",variant:"outlined",fullWidth:!0,size:"small",value:n,onChange:function(e){i(e.target.value)}}))),r.a.createElement(we.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{variant:"contained",type:"submit",color:"primary",disabled:!t||!n,className:c.continueButton},"Continue"))))}function an(){var e=de().user,t=I().getAudioAndVideoTracks,n=Object(re.i)().URLRoomName,i=Object(a.useState)(en.roomNameStep),o=Object(p.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)((null===e||void 0===e?void 0:e.displayName)||""),s=Object(p.a)(u,2),d=s[0],m=s[1],f=Object(a.useState)(""),v=Object(p.a)(f,2),b=v[0],h=v[1],g=Object(a.useState)(),E=Object(p.a)(g,2),O=E[0],w=E[1];Object(a.useEffect)((function(){n&&(h(n),(null===e||void 0===e?void 0:e.displayName)&&l(en.deviceSelectionStep))}),[e,n]),Object(a.useEffect)((function(){c!==en.deviceSelectionStep||O||t().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),w(e)}))}),[t,c,O]);var C=r.a.createElement(r.a.Fragment,null,y.a.testPreflight&&r.a.createElement($t,null),r.a.createElement(Wt,{error:O}));return r.a.createElement(Lt,{subContent:c===en.deviceSelectionStep&&C},c===en.roomNameStep&&r.a.createElement(nn,{name:d,roomName:b,setName:m,setRoomName:h,handleSubmit:function(e){e.preventDefault(),window.location.origin.includes("twil.io")||window.history.replaceState(null,"",window.encodeURI("/room/".concat(b).concat(window.location.search||""))),l(en.deviceSelectionStep)}}),c===en.deviceSelectionStep&&r.a.createElement(Et,{name:d,roomName:b,setStep:l}))}function rn(){var e=He();return r.a.createElement(Ht,{variant:"error",headline:"Connection Lost:",message:"Reconnecting to room...",open:"reconnecting"===e})}!function(e){e[e.roomNameStep=0]="roomNameStep",e[e.deviceSelectionStep=1]="deviceSelectionStep"}(en||(en={}));var on=Object(s.a)("div")({display:"flex",alignItems:"flex-end","& div":{width:"2px",marginRight:"1px","&:not(:last-child)":{borderRight:"none"}}}),cn=[0,1,2,3,4];function ln(e){var t=function(e){var t=Object(a.useState)(e.networkQualityLevel),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(e){return i(e)};return i(e.networkQualityLevel),e.on("networkQualityLevelChanged",t),function(){e.off("networkQualityLevelChanged",t)}}),[e]),r}(e.participant);return null===t?null:r.a.createElement(on,null,cn.map((function(e){return r.a.createElement("div",{key:e,style:{height:"".concat(3*(e+1),"px"),background:t>e?"white":"rgba(255, 255, 255, 0.2)"}})})))}var un=n(82);function sn(){return r.a.createElement(Ze.a,{title:"Participant is pinned. Click to un-pin.",placement:"top"},r.a.createElement(un.a,{style:{float:"right",background:"rgba(0, 0, 0, 0.5)",padding:"0.1em",boxSizing:"content-box"},width:"26",height:"26",viewBox:"0 0 26 26"},r.a.createElement("path",{fill:"#FFF",fillRule:"evenodd",strokeWidth:"0",d:"M15.808 4.489c.208-.207.544-.207.75 0l4.953 4.952c.207.207.207.543 0 .75l-1.415 1.415c-.207.208-.543.208-.75 0l-.333-.333-3.007 3.007v2.611c0 .113-.035.222-.1.312l-.055.063-1.06 1.062c-.208.207-.544.207-.751 0l-2.809-2.81-5.992 5.993c-.207.207-.543.207-.75 0-.184-.184-.205-.47-.062-.677l.062-.073 5.991-5.993-2.808-2.808c-.184-.184-.204-.47-.061-.677l.061-.073 1.062-1.061c.1-.1.234-.156.375-.156h2.61l3.007-3.007-.332-.332c-.185-.184-.205-.47-.062-.677l.062-.073zm.376 1.125l-.666.664.333.333c.185.184.205.47.062.677l-.062.074-3.537 3.537c-.1.1-.234.155-.375.155h-2.61l-.531.531 2.803 2.803.005.006.005.005 2.804 2.803.53-.531v-2.61c0-.112.036-.221.102-.311l.054-.064 3.537-3.537c.208-.208.544-.208.75 0l.333.332.664-.666-4.201-4.201z"})))}function dn(e){var t=Object(a.useState)(e&&e.isSwitchedOff),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.isSwitchedOff),e){var t=function(){return i(!0)},n=function(){return i(!1)};return e.on("switchedOff",t),e.on("switchedOn",n),function(){e.off("switchedOff",t),e.off("switchedOn",n)}}}),[e]),!!r}var mn=n(71);function fn(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){i(Array.from(e.tracks.values()));var t=function(e){return i((function(t){return[].concat(Object(mn.a)(t),[e])}))},n=function(e){return i((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("trackPublished",t),e.on("trackUnpublished",n),function(){e.off("trackPublished",t),e.off("trackUnpublished",n)}}),[e]),r}function vn(e){var t=Object(a.useState)(e&&e.track),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){if(i(e&&e.track),e){var t=function(){return i(null)};return e.on("subscribed",i),e.on("unsubscribed",t),function(){e.off("subscribed",i),e.off("unsubscribed",t)}}}),[e]),r}function pn(e){var t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(){return i(!0)},n=function(){return i(!1)};return n(),e.on("reconnecting",t),e.on("reconnected",n),function(){e.off("reconnecting",t),e.off("reconnected",n)}}),[e]),r}var bn=Object(d.a)((function(e){return Object(m.a)({container:Object(u.a)({position:"relative",display:"flex",alignItems:"center",height:0,overflow:"hidden",marginBottom:"2em","& video":{filter:"none",objectFit:"contain !important"},borderRadius:"4px",border:"".concat(e.participantBorderWidth,"px solid rgb(245, 248, 255)"),paddingTop:"calc(".concat(56.25,"% - ").concat(e.participantBorderWidth,"px)"),background:"black"},e.breakpoints.down("sm"),{height:e.sidebarMobileHeight,width:"".concat(16*e.sidebarMobileHeight/9,"px"),marginRight:"8px",marginBottom:"0",fontSize:"10px",paddingTop:"".concat(e.sidebarMobileHeight-2,"px")}),innerContainer:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},infoContainer:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%",width:"100%",background:"transparent",top:0},avatarContainer:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1},e.breakpoints.down("sm"),{"& svg":{transform:"scale(0.7)"}}),reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},screenShareIconContainer:{background:"rgba(0, 0, 0, 0.5)",padding:"0.18em 0.3em",marginRight:"0.3em",display:"flex","& path":{fill:"white"}},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.18em 0.3em",margin:0,display:"flex",alignItems:"center"},infoRowBottom:{display:"flex",justifyContent:"space-between",position:"absolute",bottom:0,left:0},networkQualityContainer:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)"},typeography:Object(u.a)({color:"white"},e.breakpoints.down("sm"),{fontSize:"0.75rem"}),hideParticipant:{display:"none"},cursorPointer:{cursor:"pointer"}})}));function hn(e){var t,n=e.participant,a=e.onClick,i=e.isSelected,o=e.children,c=e.isLocalParticipant,l=e.hideParticipant,s=fn(n),d=s.find((function(e){return"audio"===e.kind})),m=s.find((function(e){return e.trackName.includes("camera")})),f=Boolean(m),p=s.find((function(e){return e.trackName.includes("screen")})),b=dn(vn(m)),h=vn(d),g=pn(n),E=bn();return r.a.createElement("div",{className:Object(v.a)(E.container,(t={},Object(u.a)(t,E.hideParticipant,l),Object(u.a)(t,E.cursorPointer,Boolean(a)),t)),onClick:a,"data-cy-participant":n.identity},r.a.createElement("div",{className:E.infoContainer},r.a.createElement("div",{className:E.networkQualityContainer},r.a.createElement(ln,{participant:n})),r.a.createElement("div",{className:E.infoRowBottom},p&&r.a.createElement("span",{className:E.screenShareIconContainer},r.a.createElement(qe,null)),r.a.createElement("span",{className:E.identity},r.a.createElement(Ee,{audioTrack:h}),r.a.createElement(Oe.a,{variant:"body1",className:E.typeography,component:"span"},n.identity,c&&" (You)"))),r.a.createElement("div",null,i&&r.a.createElement(sn,null))),r.a.createElement("div",{className:E.innerContainer},(!f||b)&&r.a.createElement("div",{className:E.avatarContainer},r.a.createElement(at,null)),g&&r.a.createElement("div",{className:E.reconnectingContainer},r.a.createElement(Oe.a,{variant:"body1",className:E.typeography},"Reconnecting...")),o))}function gn(e){var t=e.track,n=de().activeSinkId,r=Object(a.useRef)();return Object(a.useEffect)((function(){return r.current=t.attach(),r.current.setAttribute("data-cy-audio-track-name",t.name),document.body.appendChild(r.current),function(){return t.detach().forEach((function(e){return e.remove()}))}}),[t]),Object(a.useEffect)((function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.setSinkId)||void 0===t||t.call(e,n)}),[n]),null}function En(e){var t=e.publication,n=e.isLocalParticipant,a=e.videoOnly,i=e.videoPriority,o=vn(t);if(!o)return null;switch(o.kind){case"video":return r.a.createElement(Te,{track:o,priority:i,isLocal:o.name.includes("camera")&&n});case"audio":return a?null:r.a.createElement(gn,{track:o});default:return null}}function On(e){var t,n=e.participant,a=e.videoOnly,i=e.enableScreenShare,o=e.videoPriority,c=e.isLocalParticipant,l=fn(n);return t=i&&l.some((function(e){return e.trackName.includes("screen")}))?l.filter((function(e){return!e.trackName.includes("camera")})):l.filter((function(e){return!e.trackName.includes("screen")})),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(En,{key:e.kind,publication:e,participant:n,isLocalParticipant:c,videoOnly:a,videoPriority:o})})))}function wn(e){var t=e.participant,n=e.videoOnly,a=e.enableScreenShare,i=e.onClick,o=e.isSelected,c=e.isLocalParticipant,l=e.hideParticipant;return r.a.createElement(hn,{participant:t,onClick:i,isSelected:o,isLocalParticipant:c,hideParticipant:l},r.a.createElement(On,{participant:t,videoOnly:n,enableScreenShare:a,isLocalParticipant:c}))}function Cn(){var e=I().room,t=Object(a.useState)(e.dominantSpeaker),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=function(e){null!==e&&i(e)},n=function(e){i((function(t){return t===e?null:t}))};return e.on("dominantSpeakerChanged",t),e.on("participantDisconnected",n),function(){e.off("dominantSpeakerChanged",t),e.off("participantDisconnected",n)}}),[e]),r}function Sn(){var e=I().room,t=Cn(),n=Object(a.useState)(Array.from(e.participants.values())),r=Object(p.a)(n,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){t&&o((function(e){return[t].concat(Object(mn.a)(e.filter((function(e){return e!==t}))))}))}),[t]),Object(a.useEffect)((function(){var t=function(e){return o((function(t){return[].concat(Object(mn.a)(t),[e])}))},n=function(e){return o((function(t){return t.filter((function(t){return t!==e}))}))};return e.on("participantConnected",t),e.on("participantDisconnected",n),function(){e.off("participantConnected",t),e.off("participantDisconnected",n)}}),[e]),i}function jn(){var e=h(),t=Object(p.a)(e,1)[0],n=Je(),a=Cn(),r=Sn(),i=I().room.localParticipant;return t||(n!==i?n:null)||a||r[0]||i}var kn=Object(d.a)((function(e){return Object(m.a)({container:Object(u.a)({padding:"2em",overflowY:"auto",background:"rgb(79, 83, 85)",gridArea:"1 / 2 / 1 / 3",zIndex:5},e.breakpoints.down("sm"),{gridArea:"2 / 1 / 3 / 3",overflowY:"initial",overflowX:"auto",display:"flex",padding:"".concat(e.sidebarMobilePadding,"px")}),transparentBackground:{background:"transparent"},scrollContainer:Object(u.a)({},e.breakpoints.down("sm"),{display:"flex"})})}));function xn(){var e=kn(),t=I().room.localParticipant,n=Sn(),a=h(),i=Object(p.a)(a,2),o=i[0],c=i[1],l=Je(),s=jn(),d=l&&l!==t;return 0===n.length?null:r.a.createElement("aside",{className:Object(v.a)(e.container,Object(u.a)({},e.transparentBackground,!d))},r.a.createElement("div",{className:e.scrollContainer},r.a.createElement(wn,{participant:t,isLocalParticipant:!0}),n.map((function(e){var t=e===s&&e!==l&&!(e===o);return r.a.createElement(wn,{key:e.sid,participant:e,isSelected:e===o,onClick:function(){return c(e)},hideParticipant:t})}))))}var yn=Object(d.a)((function(e){return{container:{position:"relative",display:"flex",alignItems:"center"},identity:{background:"rgba(0, 0, 0, 0.5)",color:"white",padding:"0.1em 0.3em 0.1em 0",fontSize:"1.2em",display:"inline-flex","& svg":{marginLeft:"0.3em"}},infoContainer:{position:"absolute",zIndex:2,height:"100%",width:"100%"},reconnectingContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(40, 42, 43, 0.75)",zIndex:1},fullWidth:Object(u.a)({gridArea:"1 / 1 / 2 / 3"},e.breakpoints.down("sm"),{gridArea:"1 / 1 / 3 / 3"}),avatarContainer:{display:"flex",alignItems:"center",justifyContent:"center",background:"black",position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1,"& svg":{transform:"scale(2)"}}}}));function Tn(e){var t=e.participant,n=e.children,a=yn(),i=I().room.localParticipant,o=i===t,c=Je(),l=c&&c!==i,s=fn(t),d=s.find((function(e){return e.trackName.includes("camera")})),m=s.find((function(e){return e.trackName.includes("screen")})),f=vn(m||d),p=Boolean(f),b=vn(s.find((function(e){return"audio"===e.kind}))),h=dn(f),g=pn(t);return r.a.createElement("div",{"data-cy-main-participant":!0,"data-cy-participant":t.identity,className:Object(v.a)(a.container,Object(u.a)({},a.fullWidth,!l))},r.a.createElement("div",{className:a.infoContainer},r.a.createElement("div",{className:a.identity},r.a.createElement(Ee,{audioTrack:b}),r.a.createElement(Oe.a,{variant:"body1",color:"inherit"},t.identity,o&&" (You)",m&&" - Screen"))),(!p||h)&&r.a.createElement("div",{className:a.avatarContainer},r.a.createElement(at,null)),g&&r.a.createElement("div",{className:a.reconnectingContainer},r.a.createElement(Oe.a,{variant:"body1",style:{color:"white"}},"Reconnecting...")),n)}function Pn(){var e=jn(),t=I().room.localParticipant,n=h(),a=Object(p.a)(n,1)[0],i=Je(),o=e!==a&&e!==i||e===t?null:"high";return r.a.createElement(Tn,{participant:e},r.a.createElement(On,{participant:e,videoOnly:!0,enableScreenShare:e!==t,videoPriority:o,isLocalParticipant:e===t}))}var _n=Object(s.a)("div")((function(e){var t=e.theme,n="".concat(t.sidebarMobileHeight+2*t.sidebarMobilePadding+t.participantBorderWidth,"px");return Object(u.a)({position:"relative",height:"100%",display:"grid",gridTemplateColumns:"1fr ".concat(t.sidebarWidth,"px"),gridTemplateRows:"100%"},t.breakpoints.down("sm"),{gridTemplateColumns:"100%",gridTemplateRows:"calc(100% - ".concat(n,") ").concat(n)})}));function Nn(){return r.a.createElement(_n,null,r.a.createElement(Pn,null),r.a.createElement(xn,null))}var Ln=Object(s.a)("div")({display:"grid",gridTemplateRows:"1fr auto"}),An=Object(s.a)("main")((function(e){var t=e.theme;return Object(u.a)({overflow:"hidden",paddingBottom:"".concat(t.footerHeight,"px"),background:"black"},t.breakpoints.down("sm"),{paddingBottom:"".concat(t.mobileFooterHeight+t.mobileTopBarHeight,"px")})}));function Dn(){var e=He(),t=function(){var e,t=Object(a.useState)(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)),n=Object(p.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var e=function(){var e;i(window.innerHeight*((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),r+"px"}();return r.a.createElement(Ln,{style:{height:t}},"disconnected"===e?r.a.createElement(an,null):r.a.createElement(An,null,r.a.createElement(rn,null),r.a.createElement(nt,null),r.a.createElement(Nn,null),r.a.createElement(et,null)))}var Rn=n(47);var Bn=function(e){var t=e.dismissError,n=e.error,a=n||{},i=a.message,o=a.code,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t){case 20101:return e+". Please make sure you are using the correct credentials.";default:return e}}(i,o);return r.a.createElement(F.a,{open:null!==n,onClose:function(){return t()},fullWidth:!0,maxWidth:"xs"},r.a.createElement(Y.a,null,"ERROR"),r.a.createElement(K.a,null,r.a.createElement(G.a,null,c),Boolean(o)&&r.a.createElement("pre",null,r.a.createElement("code",null,"Error Code: ",o))),r.a.createElement(U.a,null,r.a.createElement(f.a,{onClick:function(){return t()},color:"primary",autoFocus:!0},"OK")))},In=n(170),Mn=n.n(In);function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Hn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Wn=r.a.createElement("title",null,"btn_google_light_normal_ios"),Vn=r.a.createElement("desc",null,"Created with Sketch."),Fn=r.a.createElement("defs",null,r.a.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.a.createElement("feOffset",{dx:0,dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.a.createElement("feOffset",{dx:0,dy:0,in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.a.createElement("feGaussianBlur",{stdDeviation:.5,in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.a.createElement("feMerge",null,r.a.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.a.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.a.createElement("feMergeNode",{in:"SourceGraphic"}))),r.a.createElement("rect",{id:"path-2",x:0,y:0,width:40,height:40,rx:2})),Un=r.a.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.a.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.a.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.a.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.a.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.a.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.a.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.a.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.a.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.a.createElement("g",{id:"handles_square"}))),Kn=function(e){var t=e.svgRef,n=e.title,a=Hn(e,["svgRef","title"]);return r.a.createElement("svg",zn({width:"32px",height:"32px",viewBox:"7 7 32 32",ref:t},a),void 0===n?Wn:n?r.a.createElement("title",null,n):null,Vn,Fn,Un)},Gn=r.a.forwardRef((function(e,t){return r.a.createElement(Kn,zn({svgRef:t},e))})),Yn=(n.p,Object(d.a)((function(e){var t;return{googleButton:(t={background:"white",color:"rgb(0, 94, 166)",borderRadius:"4px",border:"2px solid rgb(2, 122, 197)",margin:"1.8em 0 0.7em",textTransform:"none",boxShadow:"none",padding:"0.3em 1em"},Object(u.a)(t,e.breakpoints.down("sm"),{width:"100%"}),Object(u.a)(t,"&:hover",{background:"white",boxShadow:"none"}),t),errorMessage:{color:"red",display:"flex",alignItems:"center",margin:"1em 0 0.2em","& svg":{marginRight:"0.4em"}},gutterBottom:{marginBottom:"1em"},passcodeContainer:{minHeight:"120px"},submitButton:Object(u.a)({},e.breakpoints.down("sm"),{width:"100%"})}})));function qn(){var e=Yn(),t=de(),n=t.signIn,i=t.user,o=t.isAuthReady,c=Object(re.g)(),l=Object(re.h)(),u=Object(a.useState)(""),s=Object(p.a)(u,2),d=s[0],m=s[1],v=Object(a.useState)(null),b=Object(p.a)(v,2),h=b[0],g=b[1],E=Boolean(Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH),O=function(){g(null),null===n||void 0===n||n(d).then((function(){var e;c.replace((null===l||void 0===l||null===(e=l.state)||void 0===e?void 0:e.from)||{pathname:"/"})})).catch((function(e){return g(e)}))};return!i&&E||c.replace("/"),o?r.a.createElement(Lt,null,"firebase"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"h5",className:e.gutterBottom},"Sign in to join a room"),r.a.createElement(Oe.a,{variant:"body1"},"Sign in using your Twilio Google Account"),r.a.createElement(f.a,{variant:"contained",className:e.googleButton,onClick:O,startIcon:r.a.createElement(Gn,null)},"Sign in with Google")),"passcode"===Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{variant:"h5",className:e.gutterBottom},"Enter passcode to join a room"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O()}},r.a.createElement(we.a,{container:!0,justify:"space-between"},r.a.createElement("div",{className:e.passcodeContainer},r.a.createElement(ct.a,{shrink:!0,htmlFor:"input-passcode"},"Passcode"),r.a.createElement(lt.a,{id:"input-passcode",onChange:function(e){return m(e.target.value)},type:"password",variant:"outlined",size:"small"}),r.a.createElement("div",null,h&&r.a.createElement(Oe.a,{variant:"caption",className:e.errorMessage},r.a.createElement(Mn.a,null),h.message)))),r.a.createElement(we.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!d.length,className:e.submitButton},"Submit"))))):null}var Zn=n(173);function Jn(e){var t=e.children,n=Object(Zn.a)(e,["children"]),a=de(),i=a.isAuthReady,o=a.user||!Object({NODE_ENV:"production",PUBLIC_URL:"/videsh-video-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SET_AUTH;return o||i?r.a.createElement(re.b,Object.assign({},n,{render:function(e){var n=e.location;return o?t:r.a.createElement(re.a,{to:{pathname:"/login",state:{from:n}}})}})):null}var Qn=n(171),Xn=Object(Qn.a)(),$n=Object(Qn.a)({overrides:{MuiCssBaseline:{"@global":{"html, body, #root":{height:"100%"}}},MuiButton:{root:{borderRadius:"4px",textTransform:"none",color:"rgb(40, 42, 43)",fontSize:"0.9rem",transition:Xn.transitions.create(["background-color","box-shadow","border","color"],{duration:Xn.transitions.duration.short})},text:{padding:"6px 14px"},contained:{boxShadow:"none","&:hover":{boxShadow:"none"}},outlinedPrimary:{border:"2px solid #027AC5","&:hover":{border:"2px solid rgb(1, 85, 137)"}},startIcon:{marginRight:"6px"}},MuiTypography:{body1:{color:"rgb(40, 42, 43)",fontSize:"0.9rem"}},MuiInputBase:{root:{fontSize:"0.9rem"}},MuiSelect:{root:{padding:"0.85em"}},MuiDialogActions:{root:{padding:"16px"}},MuiTextField:{root:{color:"rgb(40, 42, 43)"}},MuiInputLabel:{root:{color:"rgb(40, 42, 43)",fontSize:"1.1rem",marginBottom:"0.2em",fontWeight:500}},MuiOutlinedInput:{notchedOutline:{borderColor:"rgb(136, 140, 142)"}}},typography:{fontFamily:"Inter, sans-serif"},palette:{primary:{main:"#027AC5"}},brand:"#E22525",footerHeight:72,mobileFooterHeight:56,sidebarWidth:355,sidebarMobileHeight:90,sidebarMobilePadding:8,participantBorderWidth:2,mobileTopBarHeight:52});function ea(){var e,t=de(),n=t.roomType,a=t.settings,r={bandwidthProfile:{video:{mode:a.bandwidthProfileMode,dominantSpeakerPriority:a.dominantSpeakerPriority,renderDimensions:{low:st(a.renderDimensionLow),standard:st(a.renderDimensionStandard),high:st(a.renderDimensionHigh)},maxTracks:Number(a.maxTracks)}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(a.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==n&&"go"!==n}]};return w&&(null===r||void 0===r||null===(e=r.bandwidthProfile)||void 0===e?void 0:e.video)&&(r.bandwidthProfile.video.maxSubscriptionBitrate=25e5),function e(t){if(!O()(t))return t;var n={};for(var a in t){var r=t[a];"undefined"!==typeof r&&(n[a]=e(r))}return n}(r)}var ta=n(363),na=n(348),aa=Object(d.a)({container:{marginTop:"2.5em"},paper:{padding:"1em"},heading:{marginBottom:"0.4em"}}),ra=function(e){var t=e.children,n=aa();return y.a.isSupported?t:r.a.createElement(ta.a,null,r.a.createElement(we.a,{container:!0,justify:"center",className:n.container},r.a.createElement(we.a,{item:!0,xs:12,sm:6},r.a.createElement(na.a,{className:n.paper},r.a.createElement(Oe.a,{variant:"h4",className:n.heading},"Browser or context not supported"),r.a.createElement(Oe.a,null,"Please open this application in one of the"," ",r.a.createElement(Ct.a,{href:"https://www.twilio.com/docs/video/javascript#supported-browsers",target:"_blank",rel:"noopener"},"supported browsers"),".",r.a.createElement("br",null),"If you are using a supported browser, please ensure that this app is served over a"," ",r.a.createElement(Ct.a,{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts",target:"_blank",rel:"noopener"},"secure context")," ","(e.g. https or localhost).")))))},ia=function(){var e=de(),t=e.error,n=e.setError,a=ea();return r.a.createElement(ra,null,r.a.createElement(B,{options:a,onError:n},r.a.createElement(Bn,{dismissError:function(){return n(null)},error:t}),r.a.createElement(Dn,null)))};o.a.render(r.a.createElement(l.a,{theme:$n},r.a.createElement(c.a,null),r.a.createElement(Rn.a,null,r.a.createElement(se,null,r.a.createElement(re.d,null,r.a.createElement(Jn,{exact:!0,path:"/"},r.a.createElement(ia,null)),r.a.createElement(Jn,{exact:!0,path:"/videsh-video-app"},r.a.createElement(ia,null)),r.a.createElement(Jn,{path:"/room/:URLRoomName"},r.a.createElement(ia,null)),r.a.createElement(re.b,{path:"/login"},r.a.createElement(qn,null)),r.a.createElement(re.a,{to:"/"}))))),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.5bcea4b6.chunk.js.map